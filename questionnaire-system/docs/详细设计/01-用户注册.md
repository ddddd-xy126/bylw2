用户注册
1、简要描述
（1）功能描述：系统新用户注册时，需要填写邮箱、用户名、昵称、密码来创建账号。系统对用户输入进行严格验证，确保用户名和邮箱的唯一性，并使用 bcrypt 算法对密码进行加密存储。一旦注册成功，用户即可凭借该账户登录平台，且系统会自动将用户跳转至登录界面。
（2）代码逻辑：
用户在注册页面的对应输入框内，依次填写邮箱、用户名、昵称、密码，点击注册按钮，前端验证必填的字段前端会立即将用户填写的数据通过 HTTP 请求传输到后端服务器。后端服务器接收到用户所填数据后，会先格式验证，确保信息符合既定格式规范后，在进行检索数据库，以确认所提供的用户名和邮箱是否已经存在。若用户名或邮箱存在，向前端返回错误提示信息。若未被占用，且通过各项验证，后端则将用户信息存储至数据库中，创建用户记录。完成上述操作后，后端会把注册结果反馈给前端。前端依据接收到的结果，展示相应提示信息。若注册成功自动跳转到登录页，并清空注册表单。

###用户注册时序图描述
1.用户在LoginPage.vue填写信息点击注册后
2.LoginPage.vue向auth.js调用api
3.auth.js发送http请求给validateRegister.js中间件进行数据验证（用户名、邮箱、密码）
4.validateRegister.js验证通过后返回结果给auth.js
5.auth.js调用 注册控制器authController.js 
6.authController.js 查询数据库用户名、邮箱
7.authController.js 返回结果
8.authController.js 创建用户记录到users表
9.MySQL数据库返回创建结果给authController.js
10.authController.js 返回注册结果给auth.js
11.auth.js 返回结果给LoginPage.vue
12.LoginPage.vue展示注册结果，注册成功


2、接口定义
表 5-1 用户注册接口表
接口名称       注册接口
接口描述       用户点击注册时调用接口，可以创建新的平台账户
URL           {{baseurl}}/auth/register
method        POST
请求参数       {"username": "testuser","password": "password123","email":"test@example.com","nickname": " 测试用户"}
返回参数        {"success": true, "message": "注册成功"}

3、关键代码
代码 5-1 用户注册实现代码
//调用后端接口
export async function register(data) {
return apiClient.post('/auth/register', data);
}
// 检查用户名唯一性
const existingUsername = await User.findOne({
where: { username }
});
if (existingUsername) {
return res.status(400).json({
success: false,
message: "用户名已存在，请重新输入"
});
}
// 检查邮箱唯一性
if (email) {
const existingEmail = await User.findOne({
where: { email }
});
if (existingEmail) {
return res.status(400).json({
success: false,
message: "邮箱已存在"
});
}
}
// 创建用户
const user = await User.create({
id: Date.now().toString(),
username,
email: email || `${username}@example.com`,
password,
nickname: nickname || username,
points: 100,
avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`,
});
