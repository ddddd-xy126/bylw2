# é—®å·ç³»ç»Ÿ - æ•°æ®åº“æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°é—®å·ç³»ç»Ÿçš„ MySQL æ•°æ®åº“ç»“æ„ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ•°æ®è¡¨ã€å­—æ®µè¯´æ˜ã€ç´¢å¼•ã€å¤–é”®å…³è”å…³ç³»ç­‰ã€‚

### æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“åç§°**: questionnaire_db
- **å­—ç¬¦é›†**: utf8mb4
- **æ’åºè§„åˆ™**: utf8mb4_unicode_ci
- **æ—¶åŒº**: UTC+8 (ä¸œå…«åŒº)
- **ORM**: Sequelize 6.x
- **æ•°æ®åº“å¼•æ“**: InnoDB

---

## ğŸ“Š æ•°æ®è¡¨æ¦‚è§ˆ

ç³»ç»Ÿå…±åŒ…å« 12 ä¸ªæ•°æ®è¡¨ï¼š

| è¡¨å            | è¯´æ˜             | ä¸»è¦ç”¨é€”                         |
| --------------- | ---------------- | -------------------------------- |
| users           | ç”¨æˆ·è¡¨           | å­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€ç§¯åˆ†ã€ç­‰çº§ç­‰   |
| surveys         | é—®å·è¡¨           | å­˜å‚¨é—®å·ä¿¡æ¯ã€é¢˜ç›®ã€è®¾ç½®ç­‰       |
| answers         | ç­”æ¡ˆè¡¨           | å­˜å‚¨ç”¨æˆ·ç­”é¢˜è®°å½•                 |
| comments        | è¯„è®ºè¡¨           | å­˜å‚¨é—®å·è¯„è®º                     |
| favorites       | æ”¶è—è¡¨           | å­˜å‚¨ç”¨æˆ·æ”¶è—çš„é—®å·               |
| categories      | åˆ†ç±»è¡¨           | é—®å·åˆ†ç±»                         |
| badges          | å¾½ç« è¡¨           | æˆå°±å¾½ç« å®šä¹‰                     |
| PointHistories  | ç§¯åˆ†å†å²è¡¨       | ç”¨æˆ·ç§¯åˆ†å˜åŠ¨è®°å½•                 |
| AdminActivities | ç®¡ç†å‘˜æ´»åŠ¨æ—¥å¿—è¡¨ | ç®¡ç†å‘˜æ“ä½œè®°å½•                   |
| Announcements   | å…¬å‘Šè¡¨           | ç³»ç»Ÿå…¬å‘Š                         |
| RecycleBins     | å›æ”¶ç«™è¡¨         | å·²åˆ é™¤çš„æ•°æ®ï¼ˆæ”¯æŒè½¯åˆ é™¤å’Œæ¢å¤ï¼‰ |
| Reports         | æŠ¥å‘Šè¡¨           | AI ç”Ÿæˆçš„ä¸ªäººæŠ¥å‘Š                |

---

## ğŸ“ æ•°æ®è¡¨è¯¦ç»†è¯´æ˜

### 1. users (ç”¨æˆ·è¡¨)

å­˜å‚¨ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå              | ç±»å‹                  | çº¦æŸ             | é»˜è®¤å€¼            | è¯´æ˜                 |
| ------------------- | --------------------- | ---------------- | ----------------- | -------------------- |
| id                  | VARCHAR(50)           | PK               | -                 | ç”¨æˆ· ID              |
| username            | VARCHAR(50)           | NOT NULL, UNIQUE | -                 | ç”¨æˆ·å               |
| password            | VARCHAR(255)          | NOT NULL         | -                 | å¯†ç  (bcrypt åŠ å¯†)   |
| email               | VARCHAR(100)          | UNIQUE           | NULL              | é‚®ç®±                 |
| nickname            | VARCHAR(50)           | -                | NULL              | æ˜µç§°                 |
| avatar              | VARCHAR(255)          | -                | NULL              | å¤´åƒ URL             |
| phone               | VARCHAR(20)           | -                | NULL              | æ‰‹æœºå·               |
| role                | ENUM('user', 'admin') | -                | 'user'            | è§’è‰²                 |
| banned              | BOOLEAN               | -                | false             | æ˜¯å¦è¢«å°ç¦           |
| isActive            | BOOLEAN               | -                | true              | è´¦å·æ˜¯å¦æ¿€æ´»         |
| points              | INT                   | -                | 0                 | ç§¯åˆ†                 |
| level               | INT                   | -                | 1                 | ç­‰çº§                 |
| gender              | VARCHAR(20)           | -                | NULL              | æ€§åˆ«                 |
| age                 | INT                   | -                | NULL              | å¹´é¾„                 |
| city                | VARCHAR(50)           | -                | NULL              | åŸå¸‚                 |
| bio                 | TEXT                  | -                | NULL              | ä¸ªäººç®€ä»‹             |
| profession          | VARCHAR(100)          | -                | NULL              | èŒä¸š                 |
| joinedDate          | DATE                  | -                | NULL              | åŠ å…¥æ—¥æœŸ             |
| lastLoginAt         | DATETIME              | -                | NULL              | æœ€åç™»å½•æ—¶é—´         |
| tags                | JSON                  | -                | NULL              | ç”¨æˆ·æ ‡ç­¾             |
| completedSurveys    | JSON                  | -                | NULL              | å·²å®Œæˆçš„é—®å· ID åˆ—è¡¨ |
| continuousLoginDays | INT                   | -                | 0                 | è¿ç»­ç™»å½•å¤©æ•°         |
| loginCount          | INT                   | -                | 0                 | ç™»å½•æ¬¡æ•°             |
| unlockedBadges      | JSON                  | -                | NULL              | å·²è§£é”çš„å¾½ç«  ID åˆ—è¡¨ |
| createdAt           | DATETIME              | -                | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´             |
| updatedAt           | DATETIME              | -                | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´             |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- UNIQUE KEY: `username`
- UNIQUE KEY: `email`
- INDEX: `role`
- INDEX: `createdAt`

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "user_1701234567890",
  "username": "testuser",
  "password": "$2b$10$abcdefg...",
  "email": "test@example.com",
  "nickname": "æµ‹è¯•ç”¨æˆ·",
  "avatar": "https://example.com/avatar.jpg",
  "role": "user",
  "points": 150,
  "level": 2,
  "gender": "male",
  "age": 25,
  "city": "åŒ—äº¬",
  "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
  "profession": "å·¥ç¨‹å¸ˆ",
  "tags": ["æŠ€æœ¯", "é˜…è¯»"],
  "completedSurveys": ["survey_1", "survey_2"],
  "unlockedBadges": ["badge_1", "badge_2"],
  "loginCount": 10,
  "continuousLoginDays": 5
}
```

---

### 2. surveys (é—®å·è¡¨)

å­˜å‚¨æ‰€æœ‰é—®å·çš„ä¿¡æ¯ã€é¢˜ç›®åˆ—è¡¨ã€è®¾ç½®ç­‰ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå           | ç±»å‹         | çº¦æŸ         | é»˜è®¤å€¼            | è¯´æ˜                                           |
| ---------------- | ------------ | ------------ | ----------------- | ---------------------------------------------- |
| id               | VARCHAR(50)  | PK           | -                 | é—®å· ID                                        |
| userId           | VARCHAR(50)  | NOT NULL, FK | -                 | åˆ›å»ºè€… ID (å…³è” users.id)                      |
| title            | VARCHAR(200) | NOT NULL     | -                 | é—®å·æ ‡é¢˜                                       |
| description      | TEXT         | -            | NULL              | é—®å·æè¿°                                       |
| category         | VARCHAR(100) | -            | NULL              | åˆ†ç±»åç§°                                       |
| categoryId       | VARCHAR(50)  | FK           | NULL              | åˆ†ç±» ID (å…³è” categories.id)                   |
| tags             | JSON         | -            | NULL              | æ ‡ç­¾                                           |
| questions        | INT          | -            | 0                 | é—®é¢˜æ•°é‡                                       |
| questionList     | JSON         | NOT NULL     | -                 | é¢˜ç›®åˆ—è¡¨                                       |
| settings         | JSON         | -            | NULL              | é—®å·è®¾ç½®                                       |
| status           | ENUM         | -            | 'draft'           | çŠ¶æ€: draft/pending/published/stopped/rejected |
| isTemplate       | BOOLEAN      | -            | false             | æ˜¯å¦ä¸ºæ¨¡æ¿                                     |
| participants     | INT          | -            | 0                 | å‚ä¸è€…æ•°é‡                                     |
| participantCount | INT          | -            | 0                 | å‚ä¸äººæ•° (åˆ«å)                                |
| responses        | INT          | -            | 0                 | å›å¤æ•°é‡                                       |
| responseCount    | INT          | -            | 0                 | å›å¤æ•°é‡ (åˆ«å)                                |
| averageRating    | DECIMAL(3,2) | -            | 0.00              | å¹³å‡è¯„åˆ†                                       |
| ratingCount      | INT          | -            | 0                 | è¯„åˆ†äººæ•°                                       |
| favoriteCount    | INT          | -            | 0                 | æ”¶è—æ•°                                         |
| duration         | INT          | -            | NULL              | é¢„ä¼°æ—¶é•¿ (ç§’)                                  |
| estimatedTime    | INT          | -            | NULL              | é¢„ä¼°æ—¶é—´ (åˆ†é’Ÿ)                                |
| answerCount      | INT          | -            | 0                 | ç­”æ¡ˆæ•°é‡                                       |
| publishedAt      | DATETIME     | -            | NULL              | å‘å¸ƒæ—¶é—´                                       |
| createdAt        | DATETIME     | -            | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´                                       |
| updatedAt        | DATETIME     | -            | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´                                       |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `userId`
- INDEX: `categoryId`
- INDEX: `status`
- INDEX: `createdAt`
- INDEX: `publishedAt`

**questionList JSON ç»“æ„**

```json
[
  {
    "id": "q1",
    "type": "choice",
    "title": "æ‚¨çš„æ€§åˆ«æ˜¯ï¼Ÿ",
    "options": ["ç”·", "å¥³", "å…¶ä»–"],
    "required": true,
    "score": 0,
    "jumpLogic": {
      "ç”·": 1,
      "å¥³": 1,
      "å…¶ä»–": 2
    }
  },
  {
    "id": "q2",
    "type": "text",
    "title": "æ‚¨çš„å»ºè®®",
    "required": false
  }
]
```

**settings JSON ç»“æ„**

```json
{
  "allowAnonymous": true,
  "showProgress": true,
  "randomOrder": false,
  "allowMultipleSubmissions": false,
  "requireLogin": true
}
```

---

### 3. answers (ç­”æ¡ˆè¡¨)

å­˜å‚¨ç”¨æˆ·æäº¤çš„é—®å·ç­”æ¡ˆã€‚

**è¡¨ç»“æ„**

| å­—æ®µå      | ç±»å‹         | çº¦æŸ         | é»˜è®¤å€¼            | è¯´æ˜                      |
| ----------- | ------------ | ------------ | ----------------- | ------------------------- |
| id          | VARCHAR(50)  | PK           | -                 | ç­”æ¡ˆ ID                   |
| userId      | VARCHAR(50)  | NOT NULL, FK | -                 | ç”¨æˆ· ID (å…³è” users.id)   |
| surveyId    | VARCHAR(50)  | NOT NULL, FK | -                 | é—®å· ID (å…³è” surveys.id) |
| surveyTitle | VARCHAR(200) | -            | NULL              | é—®å·æ ‡é¢˜ (å†—ä½™)           |
| answers     | JSON         | NOT NULL     | -                 | ç­”æ¡ˆåˆ—è¡¨                  |
| score       | INT          | -            | NULL              | å¾—åˆ†                      |
| result      | VARCHAR(100) | -            | NULL              | ç»“æœ                      |
| duration    | INT          | -            | NULL              | ç­”é¢˜æ—¶é•¿ (ç§’)             |
| submittedAt | DATETIME     | -            | CURRENT_TIMESTAMP | æäº¤æ—¶é—´                  |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `userId`
- INDEX: `surveyId`
- UNIQUE INDEX: `userId_surveyId` (é˜²æ­¢é‡å¤æäº¤)
- INDEX: `submittedAt`

**answers JSON ç»“æ„**

```json
[
  {
    "questionId": "q1",
    "question": "æ‚¨çš„æ€§åˆ«æ˜¯ï¼Ÿ",
    "answer": "ç”·",
    "text": "ç”·"
  },
  {
    "questionId": "q2",
    "question": "æ‚¨çš„å»ºè®®",
    "answer": "å»ºè®®å†…å®¹",
    "text": "å»ºè®®å†…å®¹"
  }
]
```

**æ³¨æ„**: `timestamps: false`ï¼Œæ²¡æœ‰ `createdAt` å’Œ `updatedAt` å­—æ®µ

---

### 4. comments (è¯„è®ºè¡¨)

å­˜å‚¨ç”¨æˆ·å¯¹é—®å·çš„è¯„è®ºå’Œè¯„åˆ†ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå    | ç±»å‹        | çº¦æŸ         | é»˜è®¤å€¼            | è¯´æ˜                      |
| --------- | ----------- | ------------ | ----------------- | ------------------------- |
| id        | VARCHAR(50) | PK           | -                 | è¯„è®º ID                   |
| userId    | VARCHAR(50) | NOT NULL, FK | -                 | ç”¨æˆ· ID (å…³è” users.id)   |
| surveyId  | VARCHAR(50) | NOT NULL, FK | -                 | é—®å· ID (å…³è” surveys.id) |
| content   | TEXT        | NOT NULL     | -                 | è¯„è®ºå†…å®¹                  |
| rating    | INT         | -            | NULL              | è¯„åˆ† (1-5)                |
| createdAt | DATETIME    | -            | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´                  |
| updatedAt | DATETIME    | -            | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´                  |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `userId`
- INDEX: `surveyId`
- INDEX: `createdAt`

---

### 5. favorites (æ”¶è—è¡¨)

å­˜å‚¨ç”¨æˆ·æ”¶è—çš„é—®å·ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå    | ç±»å‹        | çº¦æŸ         | é»˜è®¤å€¼            | è¯´æ˜                      |
| --------- | ----------- | ------------ | ----------------- | ------------------------- |
| id        | VARCHAR(50) | PK           | -                 | æ”¶è— ID                   |
| userId    | VARCHAR(50) | NOT NULL, FK | -                 | ç”¨æˆ· ID (å…³è” users.id)   |
| surveyId  | VARCHAR(50) | NOT NULL, FK | -                 | é—®å· ID (å…³è” surveys.id) |
| createdAt | DATETIME    | -            | CURRENT_TIMESTAMP | æ”¶è—æ—¶é—´                  |
| updatedAt | DATETIME    | -            | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´                  |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `userId`
- INDEX: `surveyId`
- UNIQUE INDEX: `userId_surveyId` (é˜²æ­¢é‡å¤æ”¶è—)

---

### 6. categories (åˆ†ç±»è¡¨)

é—®å·åˆ†ç±»ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå | ç±»å‹         | çº¦æŸ             | é»˜è®¤å€¼ | è¯´æ˜     |
| ------ | ------------ | ---------------- | ------ | -------- |
| id     | VARCHAR(50)  | PK               | -      | åˆ†ç±» ID  |
| name   | VARCHAR(100) | NOT NULL, UNIQUE | -      | åˆ†ç±»åç§° |
| slug   | VARCHAR(100) | NOT NULL, UNIQUE | -      | URL slug |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- UNIQUE KEY: `name`
- UNIQUE KEY: `slug`

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "cat_academic",
  "name": "å­¦æœ¯è°ƒç ”",
  "slug": "academic"
}
```

**å†å²å˜æ›´**

- 2025-12-06: åˆ é™¤äº† `color` å’Œ `icon` å­—æ®µï¼ˆæœªåœ¨å‰ç«¯ä½¿ç”¨ï¼‰
- 2025-12-06: åˆ é™¤äº† `surveyCount` å­—æ®µï¼ˆå¯é€šè¿‡å…³è”æŸ¥è¯¢è·å–ï¼‰
- 2025-12-07: åˆ é™¤äº† `description` å­—æ®µï¼ˆå‰ç«¯æœªä½¿ç”¨ï¼‰
- 2025-12-07: åˆ é™¤äº† `displayOrder` å­—æ®µï¼ˆæ‰€æœ‰å€¼ç›¸åŒï¼Œæ— å®é™…æ„ä¹‰ï¼‰
- 2025-12-07: åˆ é™¤äº† `createdAt` å’Œ `updatedAt` å­—æ®µï¼ˆå‰ç«¯æ— åˆ›å»ºåˆ†ç±»åŠŸèƒ½ï¼Œæ— æ„ä¹‰ï¼‰
- 2025-12-07: è®¾ç½® `timestamps: false`ï¼ˆä¸å†è‡ªåŠ¨ç®¡ç†æ—¶é—´æˆ³å­—æ®µï¼‰

---

### 7. badges (å¾½ç« è¡¨)

æˆå°±å¾½ç« å®šä¹‰ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå      | ç±»å‹         | çº¦æŸ     | é»˜è®¤å€¼ | è¯´æ˜                                                                                                                                                                                       |
| ----------- | ------------ | -------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| id          | VARCHAR(50)  | PK       | -      | å¾½ç«  ID                                                                                                                                                                                    |
| name        | VARCHAR(100) | NOT NULL | -      | å¾½ç« åç§°                                                                                                                                                                                   |
| description | VARCHAR(500) | -        | NULL   | å¾½ç« æè¿°                                                                                                                                                                                   |
| icon        | VARCHAR(50)  | -        | NULL   | å›¾æ ‡(emoji)                                                                                                                                                                                |
| requirement | INT          | NOT NULL | 1      | è§£é”æ¡ä»¶(æ•°å€¼)                                                                                                                                                                             |
| type        | VARCHAR(50)  | NOT NULL | -      | å¾½ç« ç±»å‹: login_count, continuous_login, survey_count, create_count, publish_count, approved_count, favorite_count, comment_count, share_count, profile_complete, total_points, user_level |
| points      | INT          | NOT NULL | 0      | è·å¾—è¯¥å¾½ç« å¥–åŠ±çš„ç§¯åˆ†                                                                                                                                                                       |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `type`

**å­—æ®µè¯´æ˜**

- `timestamps: false`: å¾½ç« æ•°æ®ä¸ºç³»ç»Ÿé¢„è®¾ï¼Œä¸éœ€è¦æ—¶é—´æˆ³å­—æ®µ

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "badge_newbie",
  "name": "æ–°æ‰‹ä¸Šè·¯",
  "description": "å®Œæˆç¬¬ä¸€ä¸ªé—®å·",
  "icon": "ğŸ–ï¸",
  "requirement": 1,
  "type": "survey_count",
  "points": 10
}
```

**å†å²å˜æ›´**

- 2025-12-07: æ¨¡å‹è®¾ç½®ä¸º `timestamps: false`ï¼ˆå¾½ç« ä¸ºç³»ç»Ÿé¢„è®¾æ•°æ®ï¼‰
- 2025-12-07: å­—æ®µç±»å‹è°ƒæ•´ä»¥åŒ¹é…å®é™… Model å®šä¹‰

---

### 9. PointHistories (ç§¯åˆ†å†å²è¡¨)

ç”¨æˆ·ç§¯åˆ†å˜åŠ¨è®°å½•ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå    | ç±»å‹         | çº¦æŸ         | é»˜è®¤å€¼            | è¯´æ˜                              |
| --------- | ------------ | ------------ | ----------------- | --------------------------------- |
| id        | VARCHAR(50)  | PK           | -                 | è®°å½• ID                           |
| userId    | VARCHAR(50)  | NOT NULL, FK | -                 | ç”¨æˆ· ID (å…³è” users.id)           |
| points    | INT          | NOT NULL     | -                 | ç§¯åˆ†å˜åŠ¨ (æ­£æ•°ä¸ºå¢åŠ ï¼Œè´Ÿæ•°ä¸ºå‡å°‘) |
| reason    | VARCHAR(200) | NOT NULL     | -                 | ç§¯åˆ†å˜åŠ¨åŸå›                       |
| type      | ENUM         | -            | 'earn'            | ç±»å‹: earn/spend                  |
| createdAt | DATETIME     | -            | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´                          |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `userId`
- INDEX: `createdAt`

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "point_123",
  "userId": "user_456",
  "points": 10,
  "reason": "å®Œæˆé—®å·ã€Šç”¨æˆ·ä½“éªŒè°ƒç ”ã€‹",
  "type": "earn",
  "createdAt": "2024-01-01T10:00:00.000Z"
}
```

**å­—æ®µè¯´æ˜**

- `type`: earn(è·å¾—ç§¯åˆ†) / spend(æ¶ˆè´¹ç§¯åˆ†)
- `points`: æ­£æ•°è¡¨ç¤ºå¢åŠ ï¼Œè´Ÿæ•°è¡¨ç¤ºå‡å°‘
- ç§¯åˆ†å†å²è®°å½•åˆ›å»ºåä¸ä¼šä¿®æ”¹ï¼Œå› æ­¤ä¸éœ€è¦ `updatedAt` å­—æ®µ

**å†å²å˜æ›´**

- 2025-12-07: åˆ é™¤äº† `updatedAt` å­—æ®µï¼ˆç§¯åˆ†å†å²ä¸ä¼šæ›´æ–°ï¼‰
- 2025-12-07: å­—æ®µåè°ƒæ•´ï¼š`action`â†’`reason`, `description` åˆå¹¶åˆ° `reason`
- 2025-12-07: è®¾ç½® `timestamps: false`ï¼ˆåªä¿ç•™ createdAtï¼‰

---

### 11. AdminActivities (ç®¡ç†å‘˜æ´»åŠ¨æ—¥å¿—è¡¨)

ç®¡ç†å‘˜æ“ä½œè®°å½•ã€‚å‰ç«¯åœ¨ç®¡ç†å‘˜ Dashboard å’Œç”¨æˆ·ç®¡ç†ç­‰é¡µé¢ä¸­ä½¿ç”¨ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå      | ç±»å‹         | çº¦æŸ         | é»˜è®¤å€¼            | è¯´æ˜                      |
| ----------- | ------------ | ------------ | ----------------- | ------------------------- |
| id          | VARCHAR(50)  | PK           | -                 | æ—¥å¿— ID                   |
| adminId     | VARCHAR(50)  | NOT NULL, FK | -                 | ç®¡ç†å‘˜ ID (å…³è” users.id) |
| adminName   | VARCHAR(50)  | -            | NULL              | ç®¡ç†å‘˜åç§°                |
| title       | VARCHAR(200) | -            | NULL              | æ“ä½œæ ‡é¢˜                  |
| description | TEXT         | -            | NULL              | æ“ä½œæè¿°                  |
| type        | VARCHAR(50)  | -            | NULL              | æ“ä½œç±»å‹                  |
| createdAt   | DATETIME     | -            | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´                  |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `adminId`
- INDEX: `type`
- INDEX: `createdAt`

**ä½¿ç”¨åœºæ™¯**

- ç®¡ç†å‘˜ Dashboard å±•ç¤ºæœ€è¿‘æ“ä½œè®°å½•
- ç”¨æˆ·ç®¡ç†é¡µé¢è®°å½•å°ç¦/è§£å°ç­‰æ“ä½œ
- é—®å·å®¡æ ¸é¡µé¢è®°å½•å®¡æ ¸æ“ä½œ

---

### 12. Announcements (å…¬å‘Šè¡¨)

ç³»ç»Ÿå…¬å‘Šï¼Œç®¡ç†å‘˜å¯å‘å¸ƒå…¨å±€é€šçŸ¥ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå      | ç±»å‹         | çº¦æŸ               | é»˜è®¤å€¼            | è¯´æ˜                             |
| ----------- | ------------ | ------------------ | ----------------- | -------------------------------- |
| id          | INTEGER      | PK, AUTO_INCREMENT | -                 | å…¬å‘Š ID                          |
| title       | VARCHAR(200) | NOT NULL           | -                 | å…¬å‘Šæ ‡é¢˜                         |
| content     | TEXT         | NOT NULL           | -                 | å…¬å‘Šå†…å®¹                         |
| type        | ENUM         | -                  | 'info'            | ç±»å‹: info/warning/success/error |
| status      | ENUM         | -                  | 'draft'           | çŠ¶æ€: draft/published            |
| isActive    | BOOLEAN      | -                  | true              | æ˜¯å¦æ¿€æ´»                         |
| priority    | INT          | -                  | 0                 | ä¼˜å…ˆçº§                           |
| publishedAt | DATETIME     | -                  | NULL              | å‘å¸ƒæ—¶é—´                         |
| createdBy   | VARCHAR(50)  | -                  | NULL              | åˆ›å»ºè€… ID                        |
| createdAt   | DATETIME     | -                  | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´                         |
| updatedAt   | DATETIME     | -                  | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´                         |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `type`
- INDEX: `status`
- INDEX: `priority`
- INDEX: `createdAt`

---

### 13. RecycleBins (å›æ”¶ç«™è¡¨)

å·²åˆ é™¤çš„æ•°æ®ï¼Œæ”¯æŒè½¯åˆ é™¤å’Œæ¢å¤åŠŸèƒ½ã€‚å‰ç«¯æœ‰å®Œæ•´çš„å›æ”¶ç«™é¡µé¢(TrashPage.vue)ã€‚

**è¡¨ç»“æ„**

| å­—æ®µå         | ç±»å‹         | çº¦æŸ     | é»˜è®¤å€¼ | è¯´æ˜                      |
| -------------- | ------------ | -------- | ------ | ------------------------- |
| id             | VARCHAR(50)  | PK       | -      | å›æ”¶ç«™è®°å½• ID (åŸé—®å· ID) |
| surveyId       | VARCHAR(50)  | -        | NULL   | åŸé—®å· ID                 |
| title          | VARCHAR(500) | -        | NULL   | é—®å·æ ‡é¢˜                  |
| description    | TEXT         | -        | NULL   | é—®å·æè¿°                  |
| category       | VARCHAR(100) | -        | NULL   | é—®å·åˆ†ç±»                  |
| originalStatus | VARCHAR(50)  | -        | NULL   | åˆ é™¤å‰çš„çŠ¶æ€              |
| questions      | INT          | -        | NULL   | é¢˜ç›®æ•°é‡                  |
| userId         | VARCHAR(50)  | -        | NULL   | ç”¨æˆ· ID                   |
| authorId       | VARCHAR(50)  | -        | NULL   | ä½œè€… ID                   |
| surveyData     | JSON         | -        | NULL   | å®Œæ•´çš„é—®å·æ•°æ®(ç”¨äºæ¢å¤)  |
| deletedBy      | VARCHAR(50)  | -        | NULL   | åˆ é™¤æ“ä½œè€… ID             |
| deletedAt      | DATETIME     | NOT NULL | NOW    | åˆ é™¤æ—¶é—´                  |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `userId`
- INDEX: `deletedAt`

**ä½¿ç”¨åœºæ™¯**

- ç”¨æˆ·åˆ é™¤é—®å·åè‡ªåŠ¨ç§»å…¥å›æ”¶ç«™
- æ”¯æŒä»å›æ”¶ç«™æ¢å¤é—®å·
- æ”¯æŒä»å›æ”¶ç«™æ°¸ä¹…åˆ é™¤
- è¶…è¿‡ 30 å¤©è‡ªåŠ¨æ¸…ç†

---

### 14. Reports (æŠ¥å‘Šè¡¨)

AI ç”Ÿæˆçš„ä¸ªäººåˆ†ææŠ¥å‘Šã€‚

**è¡¨ç»“æ„**

| å­—æ®µå      | ç±»å‹         | çº¦æŸ         | é»˜è®¤å€¼            | è¯´æ˜                              |
| ----------- | ------------ | ------------ | ----------------- | --------------------------------- |
| id          | VARCHAR(50)  | PK           | -                 | æŠ¥å‘Š ID                           |
| userId      | VARCHAR(50)  | NOT NULL, FK | -                 | ç”¨æˆ· ID (å…³è” users.id)           |
| surveyId    | VARCHAR(50)  | FK           | NULL              | é—®å· ID (å…³è” surveys.id)         |
| answerId    | VARCHAR(50)  | FK           | NULL              | ç­”æ¡ˆ ID (å…³è” answers.id)         |
| title       | VARCHAR(200) | NOT NULL     | -                 | æŠ¥å‘Šæ ‡é¢˜                          |
| surveyTitle | VARCHAR(200) | -            | NULL              | é—®å·æ ‡é¢˜                          |
| category    | VARCHAR(100) | -            | NULL              | åˆ†ç±»                              |
| content     | TEXT('long') | -            | NULL              | æŠ¥å‘Šå†…å®¹ (Markdown)               |
| status      | ENUM         | -            | 'generating'      | çŠ¶æ€: generating/completed/failed |
| generatedAt | DATETIME     | -            | NULL              | ç”Ÿæˆå®Œæˆæ—¶é—´                      |
| createdAt   | DATETIME     | -            | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´                          |
| updatedAt   | DATETIME     | -            | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´                          |

**ç´¢å¼•**

- PRIMARY KEY: `id`
- INDEX: `userId`
- INDEX: `surveyId`
- INDEX: `status`
- INDEX: `createdAt`

**å­—æ®µè¯´æ˜**

- `answerId`: å…³è”ç”¨æˆ·æäº¤çš„å…·ä½“ç­”æ¡ˆè®°å½•ï¼Œç”¨äºç”Ÿæˆä¸ªæ€§åŒ–æŠ¥å‘Š
- `content`: ä½¿ç”¨ LONGTEXT ç±»å‹ä»¥æ”¯æŒè¾ƒé•¿çš„ AI ç”ŸæˆæŠ¥å‘Šå†…å®¹

---

## ğŸ”— å…³è”å…³ç³»

### ER å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users    â”‚1      nâ”‚   surveys   â”‚
â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚             â”‚
â”‚  - id       â”‚  userId â”‚  - id       â”‚
â”‚  - username â”‚         â”‚  - title    â”‚
â”‚  - role     â”‚         â”‚  - status   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â”‚1                      â”‚1
       â”‚                       â”‚
       â†“n                      â†“n
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   answers   â”‚         â”‚  comments   â”‚
â”‚             â”‚         â”‚             â”‚
â”‚  - id       â”‚         â”‚  - id       â”‚
â”‚  - userId   â”‚         â”‚  - userId   â”‚
â”‚  - surveyId â”‚         â”‚  - surveyId â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users    â”‚
â”‚             â”‚1
â”‚  - id       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’ favorites (n)
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚1
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’ UserBadges (n) â†â”€â”€â”€â”€ badges (1)
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’ PointHistories (n)
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ Reports (n)
```

### å¤–é”®å…³ç³»

1. **surveys.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥åˆ›å»ºå¤šä¸ªé—®å·
   - çº§è”æ“ä½œ: ON DELETE CASCADE

2. **surveys.categoryId â†’ categories.id**

   - ä¸€ä¸ªåˆ†ç±»åŒ…å«å¤šä¸ªé—®å·
   - çº§è”æ“ä½œ: ON DELETE SET NULL

3. **answers.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥æäº¤å¤šä¸ªç­”æ¡ˆ
   - çº§è”æ“ä½œ: ON DELETE CASCADE

4. **answers.surveyId â†’ surveys.id**

   - ä¸€ä¸ªé—®å·å¯ä»¥æœ‰å¤šä¸ªç­”æ¡ˆ
   - çº§è”æ“ä½œ: ON DELETE CASCADE

5. **comments.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥å‘è¡¨å¤šæ¡è¯„è®º
   - çº§è”æ“ä½œ: ON DELETE CASCADE

6. **comments.surveyId â†’ surveys.id**

   - ä¸€ä¸ªé—®å·å¯ä»¥æœ‰å¤šæ¡è¯„è®º
   - çº§è”æ“ä½œ: ON DELETE CASCADE

7. **favorites.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ”¶è—å¤šä¸ªé—®å·
   - çº§è”æ“ä½œ: ON DELETE CASCADE

8. **favorites.surveyId â†’ surveys.id**

   - ä¸€ä¸ªé—®å·å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ”¶è—
   - çº§è”æ“ä½œ: ON DELETE CASCADE

9. **PointHistories.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·æœ‰å¤šæ¡ç§¯åˆ†è®°å½•
   - çº§è”æ“ä½œ: ON DELETE CASCADE

10. **Reports.userId â†’ users.id**

    - ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªæŠ¥å‘Š
    - çº§è”æ“ä½œ: ON DELETE CASCADE

11. **Reports.surveyId â†’ surveys.id**

    - ä¸€ä¸ªé—®å·å¯ä»¥ç”Ÿæˆå¤šä¸ªæŠ¥å‘Š
    - çº§è”æ“ä½œ: ON DELETE CASCADE

12. **AdminActivities.adminId â†’ users.id**
    - ä¸€ä¸ªç®¡ç†å‘˜æœ‰å¤šæ¡æ“ä½œè®°å½•
    - çº§è”æ“ä½œ: ON DELETE CASCADE

---

## ğŸ“Œ æ•°æ®åº“è®¾è®¡åŸåˆ™

### 1. è§„èŒƒåŒ–

- éµå¾ªç¬¬ä¸‰èŒƒå¼ (3NF)
- å‡å°‘æ•°æ®å†—ä½™
- éƒ¨åˆ†å†—ä½™å­—æ®µç”¨äºæ€§èƒ½ä¼˜åŒ– (å¦‚ `surveyTitle`)

### 2. ç´¢å¼•ç­–ç•¥

- ä¸»é”®è‡ªåŠ¨ç´¢å¼•
- å¤–é”®å­—æ®µæ·»åŠ ç´¢å¼•
- å¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- è”åˆç´¢å¼•ç”¨äºå¤åˆæŸ¥è¯¢

### 3. æ•°æ®ç±»å‹

- ID: VARCHAR(50) (æ”¯æŒè‡ªå®šä¹‰ ID æ ¼å¼)
- æ—¶é—´: DATETIME (è‡ªåŠ¨ç®¡ç† createdAt/updatedAt)
- JSON: å­˜å‚¨å¤æ‚ç»“æ„ (questionList, answers, tags ç­‰)
- ENUM: é™å®šå€¼èŒƒå›´ (status, role ç­‰)

### 4. å­—ç¬¦é›†

- ä½¿ç”¨ utf8mb4 æ”¯æŒ emoji å’Œç‰¹æ®Šå­—ç¬¦
- æ’åºè§„åˆ™ utf8mb4_unicode_ci (ä¸åŒºåˆ†å¤§å°å†™)

---

## ğŸ”’ æ•°æ®å®‰å…¨

### 1. å¯†ç åŠ å¯†

- ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨
- å¯†ç å­—æ®µé•¿åº¦ VARCHAR(255)
- å¯†ç åœ¨æ¨¡å‹ hook ä¸­è‡ªåŠ¨åŠ å¯†

### 2. æ•æ„Ÿå­—æ®µ

- ç”¨æˆ·å¯†ç ä¸è¿”å›åˆ°å‰ç«¯
- ä½¿ç”¨ `toSafeObject()` æ–¹æ³•è¿‡æ»¤

### 3. è½¯åˆ é™¤

- ä½¿ç”¨ RecycleBins è¡¨å®ç°è½¯åˆ é™¤
- ä¿ç•™åˆ é™¤æ•°æ® 30 å¤©

---

## ğŸš€ åˆå§‹åŒ–è„šæœ¬

### åˆ›å»ºæ•°æ®åº“

```sql
CREATE DATABASE IF NOT EXISTS questionnaire_db
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_unicode_ci;

USE questionnaire_db;
```

### Sequelize è‡ªåŠ¨åŒæ­¥

```javascript
// server.js
sequelize
  .sync({ alter: true })
  .then(() => {
    console.log("âœ… æ•°æ®åº“è¡¨åŒæ­¥æˆåŠŸ");
  })
  .catch((err) => {
    console.error("âŒ æ•°æ®åº“åŒæ­¥å¤±è´¥:", err);
  });
```

**æ³¨æ„**:

- `sync({ alter: true })` ä¼šè‡ªåŠ¨è°ƒæ•´è¡¨ç»“æ„
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Migration

---

## ğŸ“Š æ•°æ®å¤‡ä»½ä¸æ¢å¤

### å¤‡ä»½

```bash
# å¤‡ä»½æ•´ä¸ªæ•°æ®åº“
mysqldump -u root -p questionnaire_db > backup.sql

# å¤‡ä»½ç‰¹å®šè¡¨
mysqldump -u root -p questionnaire_db users surveys answers > backup_main.sql
```

### æ¢å¤

```bash
# æ¢å¤æ•°æ®åº“
mysql -u root -p questionnaire_db < backup.sql
```

---

## ğŸ” æŸ¥è¯¢ä¼˜åŒ–å»ºè®®

### 1. ä½¿ç”¨ç´¢å¼•

```sql
-- æŸ¥è¯¢æ—¶ä½¿ç”¨ç´¢å¼•å­—æ®µ
SELECT * FROM surveys WHERE status = 'published';
SELECT * FROM users WHERE username = 'test';
```

### 2. é¿å…å…¨è¡¨æ‰«æ

```sql
-- é¿å… SELECT *
SELECT id, title, category FROM surveys;

-- ä½¿ç”¨ LIMIT é™åˆ¶ç»“æœ
SELECT * FROM answers LIMIT 10;
```

### 3. ä½¿ç”¨è¿æ¥æŸ¥è¯¢

```sql
-- ä½¿ç”¨ JOIN ä»£æ›¿å¤šæ¬¡æŸ¥è¯¢
SELECT s.*, u.username, u.nickname
FROM surveys s
JOIN users u ON s.userId = u.id
WHERE s.status = 'published';
```

### 4. JSON å­—æ®µæŸ¥è¯¢

```sql
-- æŸ¥è¯¢ JSON å­—æ®µ
SELECT * FROM surveys WHERE JSON_CONTAINS(tags, '"æŠ€æœ¯"');
SELECT * FROM users WHERE JSON_EXTRACT(tags, '$[0]') = 'é˜…è¯»';
```

---

## ğŸ“ˆ æ•°æ®ç»Ÿè®¡æŸ¥è¯¢ç¤ºä¾‹

### ç”¨æˆ·ç»Ÿè®¡

```sql
-- ç”¨æˆ·æ€»æ•°
SELECT COUNT(*) FROM users;

-- ä»Šæ—¥æ–°å¢ç”¨æˆ·
SELECT COUNT(*) FROM users
WHERE DATE(createdAt) = CURDATE();

-- æ´»è·ƒç”¨æˆ· (æœ€è¿‘7å¤©ç™»å½•)
SELECT COUNT(*) FROM users
WHERE lastLoginAt >= DATE_SUB(NOW(), INTERVAL 7 DAY);
```

### é—®å·ç»Ÿè®¡

```sql
-- é—®å·æ€»æ•° (æŒ‰çŠ¶æ€åˆ†ç»„)
SELECT status, COUNT(*) as count
FROM surveys
GROUP BY status;

-- æœ€çƒ­é—¨çš„é—®å· (æŒ‰å‚ä¸äººæ•°)
SELECT id, title, participants
FROM surveys
WHERE status = 'published'
ORDER BY participants DESC
LIMIT 10;

-- å¹³å‡é—®å·è¯„åˆ†
SELECT AVG(rating) as avg_rating
FROM surveys
WHERE ratingCount > 0;
```

### ç­”é¢˜ç»Ÿè®¡

```sql
-- ç­”é¢˜æ€»æ•°
SELECT COUNT(*) FROM answers;

-- ä»Šæ—¥ç­”é¢˜æ•°
SELECT COUNT(*) FROM answers
WHERE DATE(submittedAt) = CURDATE();

-- é—®å·å®Œæˆç‡
SELECT
  s.id,
  s.title,
  s.participants,
  COUNT(a.id) as answers,
  (COUNT(a.id) / s.participants * 100) as completion_rate
FROM surveys s
LEFT JOIN answers a ON s.id = a.surveyId
GROUP BY s.id;
```

---

## ğŸ› ï¸ ç»´æŠ¤å»ºè®®

### 1. å®šæœŸæ¸…ç†

- æ¸…ç†è¿‡æœŸçš„ RecycleBin æ•°æ® (è¶…è¿‡ 30 å¤©)
- æ¸…ç†æ— æ•ˆçš„ Token è®°å½•

### 2. ç´¢å¼•ä¼˜åŒ–

- å®šæœŸåˆ†ææ…¢æŸ¥è¯¢
- æ ¹æ®æŸ¥è¯¢æ¨¡å¼è°ƒæ•´ç´¢å¼•

### 3. æ•°æ®å½’æ¡£

- å®šæœŸå½’æ¡£å†å²æ•°æ®
- ä¿æŒä¸»è¡¨æ•°æ®é‡åœ¨åˆç†èŒƒå›´

### 4. æ€§èƒ½ç›‘æ§

- ç›‘æ§æ•°æ®åº“è¿æ¥æ•°
- ç›‘æ§æŸ¥è¯¢æ‰§è¡Œæ—¶é—´
- ç›‘æ§ç£ç›˜ç©ºé—´

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ID ç”Ÿæˆ**: ä½¿ç”¨ `generateId()` å‡½æ•°ç”Ÿæˆå”¯ä¸€ IDï¼Œæ ¼å¼å¦‚ `user_1701234567890`
2. **æ—¶åŒº**: æ•°æ®åº“æ—¶åŒºè®¾ç½®ä¸º UTC+8
3. **JSON å­—æ®µ**: ä½¿ç”¨ Sequelize çš„ JSON ç±»å‹ï¼ŒMySQL 5.7.8+ æ”¯æŒ
4. **çº§è”åˆ é™¤**: åˆ é™¤ç”¨æˆ·æ—¶ä¼šè‡ªåŠ¨åˆ é™¤å…³è”çš„é—®å·ã€ç­”æ¡ˆç­‰
5. **äº‹åŠ¡**: å…³é”®æ“ä½œä½¿ç”¨äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§

---

## ğŸ“‹ æ•°æ®åº“å˜æ›´å†å²

### 2025-12-07

**åˆ é™¤æœªä½¿ç”¨å’Œå†—ä½™å­—æ®µ**

- âœ… åˆ é™¤ `surveys.rating` å­—æ®µï¼ˆä¸ averageRating é‡å¤ï¼Œå‰ç«¯ä»…ä½¿ç”¨ averageRatingï¼‰
- âœ… åˆ é™¤ `surveys.thumbnail` å­—æ®µï¼ˆåç«¯å®šä¹‰ä½†å‰åç«¯ä»æœªä½¿ç”¨ï¼‰
- âœ… åˆ é™¤ `categories.description` å­—æ®µï¼ˆå‰ç«¯æœªä½¿ç”¨ï¼‰
- âœ… åˆ é™¤ `categories.displayOrder` å­—æ®µï¼ˆæ‰€æœ‰å€¼ç›¸åŒä¸º 0ï¼Œæ— å®é™…æ„ä¹‰ï¼‰
- âœ… åˆ é™¤ `categories.createdAt` å’Œ `updatedAt` å­—æ®µï¼ˆå‰ç«¯æ— åˆ›å»ºåˆ†ç±»åŠŸèƒ½ï¼‰
- âœ… åˆ é™¤ `point_histories.updatedAt` å­—æ®µï¼ˆç§¯åˆ†å†å²è®°å½•ä¸ä¼šæ›´æ–°ï¼‰
- âœ… æ›´æ–°ç›¸å…³ä»£ç ï¼š
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/Survey.js`
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/Category.js`ï¼ˆè®¾ç½® timestamps: falseï¼‰
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/PointHistory.js`ï¼ˆè®¾ç½® timestamps: falseï¼‰
  - æ§åˆ¶å™¨ï¼š`server/controllers/categoryController.js`ï¼ˆæ”¹ç”¨ name æ’åºï¼‰
- âœ… è¿ç§»è„šæœ¬ï¼š`server/migrations/remove-unused-fields.sql`

**å­—æ®µä¿ç•™è¯´æ˜**

- âœ… ä¿ç•™ `surveys.settings` å­—æ®µï¼ˆåç«¯åˆ›å»ºé—®å·æ—¶æœ‰ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `surveys.category` å’Œ `categoryId` å­—æ®µï¼ˆå‰ç«¯åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼‰
- âœ… ä¿ç•™ `surveys.duration` å­—æ®µï¼ˆå‰ç«¯å¤šå¤„ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `surveys.averageRating` å­—æ®µï¼ˆå‰ç«¯å¤§é‡ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `answers.surveyTitle` å­—æ®µï¼ˆå‰ç«¯ç­”é¢˜è®°å½•é¡µé¢ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `reports.surveyTitle` å­—æ®µï¼ˆå‰ç«¯æŠ¥å‘Šé¡µé¢ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `reports.answerId` å­—æ®µï¼ˆç”¨äºå…³è”å…·ä½“ç­”æ¡ˆè®°å½•ï¼‰

### 2025-12-06

**åˆ é™¤æœªä½¿ç”¨å­—æ®µ**

- âœ… åˆ é™¤ `categories.color` å­—æ®µï¼ˆåç«¯æœ‰è¯»å†™ä½†å‰ç«¯æœªä½¿ç”¨ï¼‰
- âœ… åˆ é™¤ `categories.icon` å­—æ®µï¼ˆåç«¯æœ‰è¯»å†™ä½†å‰ç«¯æœªä½¿ç”¨ï¼‰
- âœ… æ›´æ–°ç›¸å…³ä»£ç ï¼š
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/Category.js`
  - æ§åˆ¶å™¨ï¼š`server/controllers/categoryController.js`
  - æ§åˆ¶å™¨ï¼š`server/controllers/surveyController.js`
- âœ… è¿ç§»è„šæœ¬ï¼š`server/migrations/remove-category-color-icon.sql`

**å­—æ®µä¿ç•™è¯´æ˜**

- âœ… ä¿ç•™ `reports.answerId` å­—æ®µï¼ˆæ­£åœ¨ä½¿ç”¨ä¸­ï¼Œç”¨äºå…³è”ç­”æ¡ˆè®°å½•ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.2  
**æœ€åæ›´æ–°**: 2025 å¹´ 12 æœˆ 7 æ—¥
