# é—®å·ç³»ç»Ÿ - æ•°æ®åº“æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°é—®å·ç³»ç»Ÿçš„ MySQL æ•°æ®åº“ç»“æ„ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ•°æ®è¡¨ã€å­—æ®µè¯´æ˜ã€ç´¢å¼•ã€å¤–é”®å…³è”å…³ç³»ç­‰ã€‚

### æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“åç§°**: questionnaire_db
- **å­—ç¬¦é›†**: utf8mb4
- **æ’åºè§„åˆ™**: utf8mb4_unicode_ci
- **æ—¶åŒº**: UTC+8 (ä¸œå…«åŒº)
- **ORM**: Sequelize 6.x
- **æ•°æ®åº“å¼•æ“**: InnoDB

---

## ğŸ“Š æ•°æ®è¡¨æ¦‚è§ˆ

ç³»ç»Ÿå…±åŒ…å« 12 ä¸ªæ•°æ®è¡¨ï¼š

| è¡¨å            | è¯´æ˜             | ä¸»è¦ç”¨é€”                         |
| --------------- | ---------------- | -------------------------------- |
| users           | ç”¨æˆ·è¡¨           | å­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€ç§¯åˆ†ã€ç­‰çº§ç­‰   |
| surveys         | é—®å·è¡¨           | å­˜å‚¨é—®å·ä¿¡æ¯ã€é¢˜ç›®ã€è®¾ç½®ç­‰       |
| answers         | ç­”æ¡ˆè¡¨           | å­˜å‚¨ç”¨æˆ·ç­”é¢˜è®°å½•                 |
| comments        | è¯„è®ºè¡¨           | å­˜å‚¨é—®å·è¯„è®º                     |
| favorites       | æ”¶è—è¡¨           | å­˜å‚¨ç”¨æˆ·æ”¶è—çš„é—®å·               |
| categories      | åˆ†ç±»è¡¨           | é—®å·åˆ†ç±»                         |
| badges          | å¾½ç« è¡¨           | æˆå°±å¾½ç« å®šä¹‰                     |
| PointHistories  | ç§¯åˆ†å†å²è¡¨       | ç”¨æˆ·ç§¯åˆ†å˜åŠ¨è®°å½•                 |
| AdminActivities | ç®¡ç†å‘˜æ´»åŠ¨æ—¥å¿—è¡¨ | ç®¡ç†å‘˜æ“ä½œè®°å½•                   |
| Announcements   | å…¬å‘Šè¡¨           | ç³»ç»Ÿå…¬å‘Š                         |
| RecycleBins     | å›æ”¶ç«™è¡¨         | å·²åˆ é™¤çš„æ•°æ®ï¼ˆæ”¯æŒè½¯åˆ é™¤å’Œæ¢å¤ï¼‰ |
| Reports         | æŠ¥å‘Šè¡¨           | AI ç”Ÿæˆçš„ä¸ªäººæŠ¥å‘Š                |



---

## ğŸ“ æ•°æ®è¡¨è¯¦ç»†è¯´æ˜

### 1. users (ç”¨æˆ·è¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€è´¦æˆ·çŠ¶æ€ã€ç§¯åˆ†ç­‰çº§ã€ä¸ªäººç”»åƒç­‰æ•°æ®,æ˜¯æ•´ä¸ªé—®å·ç³»ç»Ÿçš„æ ¸å¿ƒç”¨æˆ·ç®¡ç†è¡¨ã€‚

**å®ä½“æè¿°**

ç”¨æˆ·å®ä½“åŒ…å«ç”¨æˆ· IDã€ç”¨æˆ·åã€å¯†ç (bcrypt åŠ å¯†)ã€é‚®ç®±ã€æ˜µç§°ã€å¤´åƒã€è§’è‰²ã€ç§¯åˆ†ã€ç­‰çº§ã€æ ‡ç­¾ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡ç”¨æˆ· ID æ¥å”¯ä¸€æ ‡è¯†æ¯ä½ç”¨æˆ·,è§’è‰²å­—æ®µç”¨äºåŒºåˆ†æ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜æƒé™,ç§¯åˆ†å’Œç­‰çº§å­—æ®µç”¨äºå®ç°ç”¨æˆ·æ¿€åŠ±æœºåˆ¶,æ ‡ç­¾å­—æ®µç”¨äºç»™ç”¨æˆ·ä¸ªæ€§åŒ–æ¨èé—®å·ã€‚æ­¤å¤–,è¿˜åŒ…å«æ€§åˆ«ã€å¹´é¾„ã€åŸå¸‚ã€èŒä¸šç­‰æ‰©å±•ä¿¡æ¯,ç”¨äºç”¨æˆ·ç”»åƒå’Œä¸ªæ€§åŒ–æ¨èã€‚ç”¨æˆ·å®ä½“è¿˜è®°å½•äº†ç™»å½•ç»Ÿè®¡(è¿ç»­ç™»å½•å¤©æ•°ã€ç™»å½•æ¬¡æ•°)ã€å·²å®Œæˆé—®å·åˆ—è¡¨ã€å·²è§£é”å¾½ç« åˆ—è¡¨ç­‰è¡Œä¸ºæ•°æ®,ä¸ºç”¨æˆ·æˆé•¿ä½“ç³»å’Œä¸ªæ€§åŒ–æœåŠ¡æä¾›æ•°æ®æ”¯æ’‘ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°            | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                        |
| ------------------- | -------- | -------- | ---------- | ---------- | --------------------------- |
| id                  | VARCHAR  | 50       | æ˜¯         | å¦         | ç”¨æˆ·å”¯ä¸€æ ‡è¯†                |
| username            | VARCHAR  | 50       | å¦         | å¦         | ç”¨æˆ·å,å”¯ä¸€                 |
| password            | VARCHAR  | 255      | å¦         | å¦         | å¯†ç (bcrypt åŠ å¯†)           |
| email               | VARCHAR  | 100      | å¦         | æ˜¯         | é‚®ç®±åœ°å€,å”¯ä¸€               |
| nickname            | VARCHAR  | 50       | å¦         | æ˜¯         | ç”¨æˆ·æ˜µç§°                    |
| avatar              | VARCHAR  | 255      | å¦         | æ˜¯         | å¤´åƒ URL                    |
| phone               | VARCHAR  | 20       | å¦         | æ˜¯         | æ‰‹æœºå·ç                     |
| role                | ENUM     | -        | å¦         | å¦         | è§’è‰²(user/admin),é»˜è®¤ user  |
| banned              | BOOLEAN  | -        | å¦         | å¦         | æ˜¯å¦è¢«å°ç¦,é»˜è®¤ false       |
| isActive            | BOOLEAN  | -        | å¦         | å¦         | è´¦å·æ˜¯å¦æ¿€æ´»,é»˜è®¤ true      |
| points              | INT      | -        | å¦         | å¦         | ç”¨æˆ·ç§¯åˆ†,é»˜è®¤ 0             |
| level               | INT      | -        | å¦         | å¦         | ç”¨æˆ·ç­‰çº§,é»˜è®¤ 1             |
| gender              | VARCHAR  | 20       | å¦         | æ˜¯         | æ€§åˆ«                        |
| age                 | INT      | -        | å¦         | æ˜¯         | å¹´é¾„                        |
| city                | VARCHAR  | 50       | å¦         | æ˜¯         | æ‰€åœ¨åŸå¸‚                    |
| bio                 | TEXT     | -        | å¦         | æ˜¯         | ä¸ªäººç®€ä»‹                    |
| profession          | VARCHAR  | 100      | å¦         | æ˜¯         | èŒä¸š                        |
| joinedDate          | DATE     | -        | å¦         | æ˜¯         | åŠ å…¥æ—¥æœŸ                    |
| lastLoginAt         | DATETIME | -        | å¦         | æ˜¯         | æœ€åç™»å½•æ—¶é—´                |
| tags                | JSON     | -        | å¦         | æ˜¯         | ç”¨æˆ·æ ‡ç­¾æ•°ç»„,ç”¨äºä¸ªæ€§åŒ–æ¨è |
| completedSurveys    | JSON     | -        | å¦         | æ˜¯         | å·²å®Œæˆçš„é—®å· ID åˆ—è¡¨        |
| continuousLoginDays | INT      | -        | å¦         | å¦         | è¿ç»­ç™»å½•å¤©æ•°,é»˜è®¤ 0         |
| loginCount          | INT      | -        | å¦         | å¦         | æ€»ç™»å½•æ¬¡æ•°,é»˜è®¤ 0           |
| unlockedBadges      | JSON     | -        | å¦         | æ˜¯         | å·²è§£é”çš„å¾½ç«  ID åˆ—è¡¨        |
| createdAt           | DATETIME | -        | å¦         | å¦         | è®°å½•åˆ›å»ºæ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ       |
| updatedAt           | DATETIME | -        | å¦         | å¦         | è®°å½•æ›´æ–°æ—¶é—´,è‡ªåŠ¨æ›´æ–°       |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- UNIQUE KEY: `username` - å”¯ä¸€ç´¢å¼•,ä¿è¯ç”¨æˆ·åä¸é‡å¤
- UNIQUE KEY: `email` - å”¯ä¸€ç´¢å¼•,ä¿è¯é‚®ç®±ä¸é‡å¤
- INDEX: `role` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰è§’è‰²æŸ¥è¯¢
- INDEX: `createdAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰åˆ›å»ºæ—¶é—´æ’åº

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "user_1701234567890",
  "username": "testuser",
  "password": "$2b$10$abcdefg...",
  "email": "test@example.com",
  "nickname": "æµ‹è¯•ç”¨æˆ·",
  "avatar": "https://example.com/avatar.jpg",
  "role": "user",
  "points": 150,
  "level": 2,
  "gender": "male",
  "age": 25,
  "city": "åŒ—äº¬",
  "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
  "profession": "å·¥ç¨‹å¸ˆ",
  "tags": ["æŠ€æœ¯", "é˜…è¯»"],
  "completedSurveys": ["survey_1", "survey_2"],
  "unlockedBadges": ["badge_1", "badge_2"],
  "loginCount": 10,
  "continuousLoginDays": 5
}
```

---

### 2. surveys (é—®å·è¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç³»ç»Ÿä¸­æ‰€æœ‰é—®å·çš„è¯¦ç»†ä¿¡æ¯,åŒ…æ‹¬é—®å·çš„åŸºæœ¬å±æ€§ã€é¢˜ç›®å†…å®¹ã€é…ç½®é¡¹ã€çŠ¶æ€ç®¡ç†å’Œç»Ÿè®¡æ•°æ®ã€‚

**å®ä½“æè¿°**

é—®å·å®ä½“åŒ…å«é—®å· IDã€åˆ›å»ºè€… IDã€æ ‡é¢˜ã€æè¿°ã€åˆ†ç±»ã€æ ‡ç­¾ã€é¢˜ç›®åˆ—è¡¨ç­‰æ ¸å¿ƒå±æ€§ã€‚ç³»ç»Ÿé€šè¿‡é—®å· ID å”¯ä¸€æ ‡è¯†æ¯ä»½é—®å·,åˆ›å»ºè€… ID å…³è”åˆ°ç”¨æˆ·è¡¨ä»¥ç¡®å®šé—®å·å½’å±ã€‚é¢˜ç›®åˆ—è¡¨ä»¥ JSON æ ¼å¼å­˜å‚¨å®Œæ•´çš„é—®é¢˜ç»“æ„,åŒ…æ‹¬é¢˜å‹ã€é€‰é¡¹ã€å¿…å¡«æ€§ã€è·³è½¬é€»è¾‘ç­‰ã€‚é—®å·è®¾ç½®å­—æ®µå­˜å‚¨å„ç§é…ç½®é€‰é¡¹,å¦‚æ˜¯å¦å…è®¸åŒ¿åã€æ˜¯å¦æ˜¾ç¤ºè¿›åº¦ã€é¢˜ç›®é¡ºåºç­‰ã€‚çŠ¶æ€å­—æ®µç”¨äºç®¡ç†é—®å·çš„ç”Ÿå‘½å‘¨æœŸ(è‰ç¨¿/å¾…å®¡æ ¸/å·²å‘å¸ƒ/å·²åœæ­¢/å·²æ‹’ç»)ã€‚æ­¤å¤–,è¿˜åŒ…å«ä¸°å¯Œçš„ç»Ÿè®¡å­—æ®µ,å¦‚å‚ä¸äººæ•°ã€å›å¤æ•°ã€å¹³å‡è¯„åˆ†ã€æ”¶è—æ•°ç­‰,ç”¨äºé—®å·æ•ˆæœè¯„ä¼°å’Œæ’è¡Œå±•ç¤ºã€‚é—®å·å®ä½“æ”¯æŒæ¨¡æ¿åŠŸèƒ½,å¯å°†ä¼˜ç§€é—®å·æ ‡è®°ä¸ºæ¨¡æ¿ä¾›å…¶ä»–ç”¨æˆ·å‚è€ƒä½¿ç”¨ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°         | æ•°æ®ç±»å‹     | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                             |
| ---------------- | ------------ | -------- | ---------- | ---------- | -------------------------------- |
| id               | VARCHAR      | 50       | æ˜¯         | å¦         | é—®å·å”¯ä¸€æ ‡è¯†                     |
| userId           | VARCHAR      | 50       | å¦         | å¦         | åˆ›å»ºè€… ID,å…³è” users.id          |
| title            | VARCHAR      | 200      | å¦         | å¦         | é—®å·æ ‡é¢˜                         |
| description      | TEXT         | -        | å¦         | æ˜¯         | é—®å·æè¿°è¯´æ˜                     |
| category         | VARCHAR      | 100      | å¦         | æ˜¯         | åˆ†ç±»åç§°                         |
| categoryId       | VARCHAR      | 50       | å¦         | æ˜¯         | åˆ†ç±» ID,å…³è” categories.id       |
| tags             | JSON         | -        | å¦         | æ˜¯         | é—®å·æ ‡ç­¾æ•°ç»„                     |
| questions        | INT          | -        | å¦         | å¦         | é—®é¢˜æ•°é‡,é»˜è®¤ 0                  |
| questionList     | JSON         | -        | å¦         | å¦         | é¢˜ç›®åˆ—è¡¨,å­˜å‚¨å®Œæ•´é¢˜ç›®ç»“æ„        |
| settings         | JSON         | -        | å¦         | æ˜¯         | é—®å·é…ç½®é¡¹(åŒ¿åè®¾ç½®ã€è¿›åº¦æ˜¾ç¤ºç­‰) |
| status           | ENUM         | -        | å¦         | å¦         | é—®å·çŠ¶æ€,é»˜è®¤ draft              |
| isTemplate       | BOOLEAN      | -        | å¦         | å¦         | æ˜¯å¦ä¸ºæ¨¡æ¿,é»˜è®¤ false            |
| participantCount | INT          | -        | å¦         | å¦         | å‚ä¸äººæ•°,é»˜è®¤ 0                  |
| responseCount    | INT          | -        | å¦         | å¦         | å›å¤æ•°é‡,é»˜è®¤ 0                  |
| averageRating    | DECIMAL(3,2) | -        | å¦         | å¦         | å¹³å‡è¯„åˆ†(1-5),é»˜è®¤ 0.00          |
| ratingCount      | INT          | -        | å¦         | å¦         | è¯„åˆ†äººæ•°,é»˜è®¤ 0                  |
| favoriteCount    | INT          | -        | å¦         | å¦         | æ”¶è—æ•°,é»˜è®¤ 0                    |
| duration         | INT          | -        | å¦         | æ˜¯         | é¢„ä¼°æ—¶é•¿(ç§’)                     |
| estimatedTime    | INT          | -        | å¦         | æ˜¯         | é¢„ä¼°æ—¶é—´(åˆ†é’Ÿ)                   |
| answerCount      | INT          | -        | å¦         | å¦         | ç­”æ¡ˆæ•°é‡,é»˜è®¤ 0                  |
| publishedAt      | DATETIME     | -        | å¦         | æ˜¯         | å‘å¸ƒæ—¶é—´                         |
| createdAt        | DATETIME     | -        | å¦         | å¦         | åˆ›å»ºæ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ                |
| updatedAt        | DATETIME     | -        | å¦         | å¦         | æ›´æ–°æ—¶é—´,è‡ªåŠ¨æ›´æ–°                |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `userId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç”¨æˆ·åˆ›å»ºçš„é—®å·
- INDEX: `categoryId` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰åˆ†ç±»æŸ¥è¯¢
- INDEX: `status` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰çŠ¶æ€ç­›é€‰é—®å·
- INDEX: `createdAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰åˆ›å»ºæ—¶é—´æ’åº
- INDEX: `publishedAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰å‘å¸ƒæ—¶é—´æ’åº

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "survey_1701234567890",
  "userId": "user_1701234567890",
  "title": "ç”¨æˆ·ä½“éªŒè°ƒç ”é—®å·",
  "description": "æœ¬é—®å·æ—¨åœ¨äº†è§£ç”¨æˆ·å¯¹äº§å“çš„ä½¿ç”¨ä½“éªŒå’Œæ”¹è¿›å»ºè®®",
  "category": "å­¦æœ¯è°ƒç ”",
  "categoryId": "cat_academic",
  "tags": ["ç”¨æˆ·ä½“éªŒ", "äº§å“è°ƒç ”"],
  "questions": 5,
  "questionList": [
    {
      "id": "q1",
      "type": "choice",
      "title": "æ‚¨çš„æ€§åˆ«æ˜¯?",
      "options": ["ç”·", "å¥³", "å…¶ä»–"],
      "required": true
    },
    {
      "id": "q2",
      "type": "text",
      "title": "è¯·ç®€è¦æè¿°æ‚¨çš„ä½¿ç”¨ä½“éªŒ",
      "required": false
    }
  ],
  "settings": {
    "allowAnonymous": true,
    "showProgress": true,
    "randomOrder": false,
    "requireLogin": true
  },
  "status": "published",
  "isTemplate": false,
  "participantCount": 150,
  "responseCount": 145,
  "averageRating": 4.5,
  "ratingCount": 120,
  "favoriteCount": 35,
  "duration": 300,
  "estimatedTime": 5,
  "answerCount": 145,
  "publishedAt": "2024-01-01T10:00:00.000Z",
  "createdAt": "2024-01-01T09:00:00.000Z",
  "updatedAt": "2024-01-01T10:00:00.000Z"
}
```

**questionList JSON ç»“æ„**

```json
[
  {
    "id": "q1",
    "type": "choice",
    "title": "æ‚¨çš„æ€§åˆ«æ˜¯ï¼Ÿ",
    "options": ["ç”·", "å¥³", "å…¶ä»–"],
    "required": true,
    "score": 0,
    "jumpLogic": {
      "ç”·": 1,
      "å¥³": 1,
      "å…¶ä»–": 2
    }
  },
  {
    "id": "q2",
    "type": "text",
    "title": "æ‚¨çš„å»ºè®®",
    "required": false
  }
]
```

**settings JSON ç»“æ„**

```json
{
  "allowAnonymous": true,
  "showProgress": true,
  "randomOrder": false,
  "allowMultipleSubmissions": false,
  "requireLogin": true
}
```

---

### 3. answers (ç­”æ¡ˆè¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç”¨æˆ·æäº¤çš„é—®å·ç­”æ¡ˆè®°å½•,åŒ…æ‹¬ç­”é¢˜å†…å®¹ã€å¾—åˆ†ã€ç”¨æ—¶ç­‰è¯¦ç»†ä¿¡æ¯ã€‚

**å®ä½“æè¿°**

ç­”æ¡ˆå®ä½“åŒ…å«ç­”æ¡ˆ IDã€ç”¨æˆ· IDã€é—®å· IDã€ç­”æ¡ˆåˆ—è¡¨ã€å¾—åˆ†ã€ç»“æœã€ç­”é¢˜æ—¶é•¿ã€æäº¤æ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡ç­”æ¡ˆ ID å”¯ä¸€æ ‡è¯†æ¯æ¬¡ç­”é¢˜è®°å½•,ç”¨æˆ· ID å’Œé—®å· ID å»ºç«‹ä¸ç”¨æˆ·è¡¨å’Œé—®å·è¡¨çš„å…³è”å…³ç³»ã€‚ç­”æ¡ˆåˆ—è¡¨ä»¥ JSON æ ¼å¼å­˜å‚¨ç”¨æˆ·å¯¹æ¯é“é¢˜çš„ä½œç­”æƒ…å†µ,åŒ…æ‹¬é¢˜ç›® IDã€é¢˜ç›®å†…å®¹ã€ç”¨æˆ·é€‰æ‹©æˆ–å¡«å†™çš„ç­”æ¡ˆç­‰ã€‚å¾—åˆ†å­—æ®µç”¨äºè®°å½•æµ‹è¯„ç±»é—®å·çš„åˆ†æ•°,ç»“æœå­—æ®µå­˜å‚¨åŸºäºå¾—åˆ†çš„è¯„çº§æˆ–ç±»å‹åˆ¤å®š(å¦‚æ€§æ ¼æµ‹è¯•ç»“æœ)ã€‚ç­”é¢˜æ—¶é•¿å­—æ®µè®°å½•ç”¨æˆ·å®Œæˆé—®å·æ‰€èŠ±è´¹çš„æ—¶é—´,å¯ç”¨äºæ•°æ®åˆ†æå’Œå¼‚å¸¸æ£€æµ‹ã€‚ç³»ç»Ÿé€šè¿‡ userId_surveyId å”¯ä¸€ç´¢å¼•é˜²æ­¢ç”¨æˆ·é‡å¤æäº¤åŒä¸€é—®å·(é™¤éé—®å·è®¾ç½®å…è®¸å¤šæ¬¡æäº¤)ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°    | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                        |
| ----------- | -------- | -------- | ---------- | ---------- | --------------------------- |
| id          | VARCHAR  | 50       | æ˜¯         | å¦         | ç­”æ¡ˆè®°å½•å”¯ä¸€æ ‡è¯†            |
| userId      | VARCHAR  | 50       | å¦         | å¦         | ç­”é¢˜ç”¨æˆ· ID,å…³è” users.id   |
| surveyId    | VARCHAR  | 50       | å¦         | å¦         | é—®å· ID,å…³è” surveys.id     |
| answers     | JSON     | -        | å¦         | å¦         | ç­”æ¡ˆåˆ—è¡¨,å­˜å‚¨æ¯é¢˜çš„ä½œç­”å†…å®¹ |
| score       | INT      | -        | å¦         | æ˜¯         | æµ‹è¯„å¾—åˆ†                    |
| result      | VARCHAR  | 100      | å¦         | æ˜¯         | æµ‹è¯„ç»“æœ(å¦‚æ€§æ ¼ç±»å‹ã€ç­‰çº§)  |
| duration    | INT      | -        | å¦         | æ˜¯         | ç­”é¢˜æ—¶é•¿(ç§’)                |
| submittedAt | DATETIME | -        | å¦         | å¦         | æäº¤æ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ           |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `userId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„ç­”é¢˜è®°å½•
- INDEX: `surveyId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢é—®å·çš„æ‰€æœ‰å›ç­”
- UNIQUE INDEX: `userId_surveyId` - å”¯ä¸€ç´¢å¼•,é˜²æ­¢é‡å¤æäº¤
- INDEX: `submittedAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰æäº¤æ—¶é—´æ’åº

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "answer_1701234567890",
  "userId": "user_1701234567890",
  "surveyId": "survey_1701234567890",
  "answers": [
    {
      "questionId": "q1",
      "question": "æ‚¨çš„æ€§åˆ«æ˜¯?",
      "answer": "ç”·",
      "text": "ç”·"
    },
    {
      "questionId": "q2",
      "question": "è¯·ç®€è¦æè¿°æ‚¨çš„ä½¿ç”¨ä½“éªŒ",
      "answer": "äº§å“åŠŸèƒ½å¾ˆå®Œå–„,æ“ä½œç®€å•æ˜“ç”¨",
      "text": "äº§å“åŠŸèƒ½å¾ˆå®Œå–„,æ“ä½œç®€å•æ˜“ç”¨"
    }
  ],
  "score": 85,
  "result": "ä¼˜ç§€",
  "duration": 280,
  "submittedAt": "2024-01-02T14:30:00.000Z"
}
```

**answers JSON ç»“æ„**

```json
[
  {
    "questionId": "q1",
    "question": "æ‚¨çš„æ€§åˆ«æ˜¯ï¼Ÿ",
    "answer": "ç”·",
    "text": "ç”·"
  },
  {
    "questionId": "q2",
    "question": "æ‚¨çš„å»ºè®®",
    "answer": "å»ºè®®å†…å®¹",
    "text": "å»ºè®®å†…å®¹"
  }
]
```

**å­—æ®µè¯´æ˜**

- é€šè¿‡å…³è” Survey è¡¨è·å–é—®å·æ ‡é¢˜ï¼Œä¸å†—ä½™å­˜å‚¨
- `timestamps: false`ï¼šæ²¡æœ‰ `createdAt` å’Œ `updatedAt` å­—æ®µ

---

### 4. comments (è¯„è®ºè¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç”¨æˆ·å¯¹é—®å·çš„è¯„è®ºå†…å®¹å’Œè¯„åˆ†,ç”¨äºé—®å·è´¨é‡åé¦ˆå’Œç”¨æˆ·äº’åŠ¨ã€‚

**å®ä½“æè¿°**

è¯„è®ºå®ä½“åŒ…å«è¯„è®º IDã€ç”¨æˆ· IDã€é—®å· IDã€è¯„åˆ†ã€è¯„è®ºå†…å®¹ã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡è¯„è®º ID å”¯ä¸€æ ‡è¯†æ¯æ¡è¯„è®º,ç”¨æˆ· ID å…³è”åˆ°ç”¨æˆ·è¡¨è·å–è¯„è®ºè€…ä¿¡æ¯(ç”¨æˆ·åã€å¤´åƒç­‰),é—®å· ID å…³è”åˆ°é—®å·è¡¨æ ‡è¯†è¢«è¯„è®ºçš„é—®å·ã€‚è¯„åˆ†å­—æ®µå…è®¸ç”¨æˆ·å¯¹é—®å·è¿›è¡Œ 1-5 æ˜Ÿè¯„ä»·,è¯„è®ºå†…å®¹å­—æ®µå­˜å‚¨ç”¨æˆ·çš„æ–‡å­—åé¦ˆã€‚è¯„è®ºåˆ›å»ºåæ”¯æŒç¼–è¾‘ä¿®æ”¹,æ›´æ–°æ—¶é—´ä¼šè‡ªåŠ¨è®°å½•æœ€åä¿®æ”¹æ—¶é—´ã€‚åˆ é™¤æ“ä½œä¸ºçœŸåˆ é™¤,ä¸ä¿ç•™è½¯åˆ é™¤æ ‡è®°,ç¡®ä¿æ•°æ®åº“çš„æ•´æ´æ€§ã€‚è¯„è®ºæ•°æ®é€šè¿‡å…³è”æŸ¥è¯¢è·å–ç”¨æˆ·ä¿¡æ¯,é¿å…å†—ä½™å­˜å‚¨ç”¨æˆ·åå’Œå¤´åƒç­‰æ˜“å˜å­—æ®µã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°  | æ•°æ®ç±»å‹     | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                      |
| --------- | ------------ | -------- | ---------- | ---------- | ------------------------- |
| id        | VARCHAR      | 50       | æ˜¯         | å¦         | è¯„è®ºå”¯ä¸€æ ‡è¯†              |
| userId    | VARCHAR      | 50       | å¦         | å¦         | è¯„è®ºç”¨æˆ· ID,å…³è” users.id |
| surveyId  | VARCHAR      | 50       | å¦         | å¦         | é—®å· ID,å…³è” surveys.id   |
| rating    | DECIMAL(2,1) | -        | å¦         | æ˜¯         | è¯„åˆ†(1-5 æ˜Ÿ)              |
| content   | TEXT         | -        | å¦         | å¦         | è¯„è®ºå†…å®¹                  |
| createdAt | DATETIME     | -        | å¦         | å¦         | åˆ›å»ºæ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ         |
| updatedAt | DATETIME     | -        | å¦         | å¦         | æ›´æ–°æ—¶é—´,è‡ªåŠ¨æ›´æ–°         |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `userId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„è¯„è®º
- INDEX: `surveyId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢é—®å·çš„æ‰€æœ‰è¯„è®º
- INDEX: `createdAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰æ—¶é—´æ’åºè¯„è®º

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "comment_1701234567890",
  "userId": "user_1701234567890",
  "surveyId": "survey_1701234567890",
  "rating": 4.5,
  "content": "é—®å·è®¾è®¡å¾ˆåˆç†,é¢˜ç›®æ¸…æ™°æ˜“æ‡‚,å»ºè®®å¢åŠ æ›´å¤šäº’åŠ¨ç¯èŠ‚ã€‚",
  "createdAt": "2024-01-03T10:15:00.000Z",
  "updatedAt": "2024-01-03T10:15:00.000Z"
}
```

**å­—æ®µè¯´æ˜**

- é€šè¿‡å…³è” User è¡¨è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆusername, avatarï¼‰ï¼Œä¸å†—ä½™å­˜å‚¨
- åˆ é™¤æ“ä½œä¸ºçœŸåˆ é™¤ï¼Œä¸ä½¿ç”¨è½¯åˆ é™¤

---

### 5. favorites (æ”¶è—è¡¨)

**è¡¨çš„åŸºç¡€æè¿¹**

å­˜å‚¨ç”¨æˆ·æ”¶è—çš„é—®å·è®°å½•,ç”¨äºå®ç°ç”¨æˆ·å¯¹æ„Ÿå…´è¶£é—®å·çš„å¿«é€Ÿè®¿é—®åŠŸèƒ½ã€‚

**å®ä½“æè¿°**

æ”¶è—å®ä½“åŒ…å«æ”¶è— IDã€ç”¨æˆ· IDã€é—®å· IDã€åˆ›å»ºæ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡æ”¶è— ID å”¯ä¸€æ ‡è¯†æ¯æ¡æ”¶è—è®°å½•,ç”¨æˆ· ID å’Œé—®å· ID å»ºç«‹ä¸ç”¨æˆ·è¡¨å’Œé—®å·è¡¨çš„å…³è”å…³ç³»ã€‚åˆ›å»ºæ—¶é—´è®°å½•ç”¨æˆ·æ”¶è—è¯¥é—®å·çš„æ—¶åˆ»,å¯ç”¨äºæ”¶è—åˆ—è¡¨çš„æ’åºå±•ç¤ºã€‚ç³»ç»Ÿé€šè¿‡ userId_surveyId å”¯ä¸€ç´¢å¼•é˜²æ­¢ç”¨æˆ·é‡å¤æ”¶è—åŒä¸€é—®å·ã€‚æ”¶è—è®°å½•ä¸€æ—¦åˆ›å»ºä¸ä¼šä¿®æ”¹,å› æ­¤ä¸éœ€è¦ updatedAt å­—æ®µã€‚å½“ç”¨æˆ·å–æ¶ˆæ”¶è—æ—¶,è®°å½•ä¼šè¢«åˆ é™¤,é—®å·è¡¨çš„ favoriteCount å­—æ®µä¼šåŒæ­¥å‡å°‘ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°  | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                    |
| --------- | -------- | -------- | ---------- | ---------- | ----------------------- |
| id        | VARCHAR  | 50       | æ˜¯         | å¦         | æ”¶è—è®°å½•å”¯ä¸€æ ‡è¯†        |
| userId    | VARCHAR  | 50       | å¦         | å¦         | ç”¨æˆ· ID,å…³è” users.id   |
| surveyId  | VARCHAR  | 50       | å¦         | å¦         | é—®å· ID,å…³è” surveys.id |
| createdAt | DATETIME | -        | å¦         | å¦         | æ”¶è—æ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ       |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `userId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„æ”¶è—åˆ—è¡¨
- INDEX: `surveyId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢é—®å·è¢«æ”¶è—æƒ…å†µ
- UNIQUE INDEX: `userId_surveyId` - å”¯ä¸€ç´¢å¼•,é˜²æ­¢é‡å¤æ”¶è—

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "favorite_1701234567890",
  "userId": "user_1701234567890",
  "surveyId": "survey_1701234567890",
  "createdAt": "2024-01-03T15:20:00.000Z"
}
```

**å­—æ®µè¯´æ˜**

- `updatedAt: false`: æ”¶è—è®°å½•ä¸éœ€è¦æ›´æ–°æ—¶é—´ï¼ŒModel ä¸­å·²ç¦ç”¨

---

### 6. categories (åˆ†ç±»è¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨é—®å·çš„åˆ†ç±»ä¿¡æ¯,ç”¨äºé—®å·çš„åˆ†ç±»ç®¡ç†å’Œç­›é€‰ã€‚

**å®ä½“æè¿°**

åˆ†ç±»å®ä½“åŒ…å«åˆ†ç±» IDã€åˆ†ç±»åç§°ã€URL slug ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡åˆ†ç±» ID å”¯ä¸€æ ‡è¯†æ¯ä¸ªåˆ†ç±»,åˆ†ç±»åç§°ç”¨äºåœ¨å‰ç«¯ç•Œé¢å±•ç¤º,å¹¶é€šè¿‡å”¯ä¸€çº¦æŸç¡®ä¿åŒååˆ†ç±»ä¸é‡å¤ã€‚slug å­—æ®µç”¨äºç”Ÿæˆå‹å¥½çš„ URL è·¯å¾„,ä¾‹å¦‚å°†â€œå­¦æœ¯è°ƒç ”â€è½¬æ¢ä¸º academicã€‚åˆ†ç±»æ•°æ®ä¸ºç³»ç»Ÿé¢„è®¾ï¼Œå‰ç«¯æ— åˆ›å»ºåˆ†ç±»åŠŸèƒ½ï¼Œå› æ­¤ä¸éœ€è¦æ—¶é—´æˆ³å­—æ®µã€‚æ¯ä¸ªåˆ†ç±»å¯ä»¥å…³è”å¤šä¸ªé—®å·,é€šè¿‡ surveys è¡¨çš„ categoryId å­—æ®µå»ºç«‹å…³è”ï¼Œåˆ†ç±»ä¸‹çš„é—®å·æ•°é‡å¯ä»¥é€šè¿‡å…³è”æŸ¥è¯¢åŠ¨æ€è®¡ç®—ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§° | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                           |
| -------- | -------- | -------- | ---------- | ---------- | ------------------------------ |
| id       | VARCHAR  | 50       | æ˜¯         | å¦         | åˆ†ç±»å”¯ä¸€æ ‡è¯†                   |
| name     | VARCHAR  | 100      | å¦         | å¦         | åˆ†ç±»åç§°,å”¯ä¸€                  |
| slug     | VARCHAR  | 100      | å¦         | å¦         | URL slug,ç”¨äºç”Ÿæˆå‹å¥½ URL,å”¯ä¸€ |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- UNIQUE KEY: `name` - å”¯ä¸€ç´¢å¼•,ç¡®ä¿åˆ†ç±»åç§°ä¸é‡å¤
- UNIQUE KEY: `slug` - å”¯ä¸€ç´¢å¼•,ç¡®ä¿ URL slug ä¸é‡å¤

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "cat_academic",
  "name": "å­¦æœ¯è°ƒç ”",
  "slug": "academic"
}
```

**å†å²å˜æ›´**

- 2025-12-06: åˆ é™¤äº† `color` å’Œ `icon` å­—æ®µï¼ˆæœªåœ¨å‰ç«¯ä½¿ç”¨ï¼‰
- 2025-12-06: åˆ é™¤äº† `surveyCount` å­—æ®µï¼ˆå¯é€šè¿‡å…³è”æŸ¥è¯¢è·å–ï¼‰
- 2025-12-07: åˆ é™¤äº† `description` å­—æ®µï¼ˆå‰ç«¯æœªä½¿ç”¨ï¼‰
- 2025-12-07: åˆ é™¤äº† `displayOrder` å­—æ®µï¼ˆæ‰€æœ‰å€¼ç›¸åŒï¼Œæ— å®é™…æ„ä¹‰ï¼‰
- 2025-12-07: åˆ é™¤äº† `createdAt` å’Œ `updatedAt` å­—æ®µï¼ˆå‰ç«¯æ— åˆ›å»ºåˆ†ç±»åŠŸèƒ½ï¼Œæ— æ„ä¹‰ï¼‰
- 2025-12-07: è®¾ç½® `timestamps: false`ï¼ˆä¸å†è‡ªåŠ¨ç®¡ç†æ—¶é—´æˆ³å­—æ®µï¼‰

---

### 7. badges (å¾½ç« è¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç³»ç»Ÿé¢„è®¾çš„æˆå°±å¾½ç« å®šä¹‰,ç”¨äºç”¨æˆ·æ¿€åŠ±å’Œæˆé•¿ä½“ç³»ã€‚

**å®ä½“æè¿°**

å¾½ç« å®ä½“åŒ…å«å¾½ç«  IDã€åç§°ã€æè¿°ã€å›¾æ ‡ã€è§£é”æ¡ä»¶ã€ç±»å‹ã€å¥–åŠ±ç§¯åˆ†ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡å¾½ç«  ID å”¯ä¸€æ ‡è¯†æ¯ä¸ªå¾½ç« ,åç§°å’Œæè¿°ç”¨äºåœ¨å‰ç«¯å±•ç¤ºå¾½ç« ä¿¡æ¯,å›¾æ ‡å­—æ®µå­˜å‚¨ emoji è¡¨æƒ…ä½œä¸ºè§†è§‰æ ‡è¯†ã€‚è§£é”æ¡ä»¶å­—æ®µå®šä¹‰äº†è·å¾—è¯¥å¾½ç« æ‰€éœ€è¾¾æˆçš„æ•°å€¼,ç±»å‹å­—æ®µæ ‡æ˜äº†å¾½ç« çš„ç±»åˆ«(å¦‚ç™»å½•æ¬¡æ•°ã€è¿ç»­ç™»å½•ã€å®Œæˆé—®å·æ•°ç­‰),ç§¯åˆ†å­—æ®µè®¾å®šäº†è§£é”å¾½ç« åçš„ç§¯åˆ†å¥–åŠ±ã€‚å¾½ç« æ•°æ®ä¸ºç³»ç»Ÿé¢„è®¾,ä¸æ”¯æŒç”¨æˆ·åˆ›å»ºæˆ–ä¿®æ”¹,å› æ­¤ä¸éœ€è¦æ—¶é—´æˆ³å­—æ®µã€‚ç”¨æˆ·è·å¾—çš„å¾½ç«  ID åˆ—è¡¨å­˜å‚¨åœ¨ users è¡¨çš„ unlockedBadges å­—æ®µä¸­ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°    | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                                                                             |
| ----------- | -------- | -------- | ---------- | ---------- | -------------------------------------------------------------------------------- |
| id          | VARCHAR  | 50       | æ˜¯         | å¦         | å¾½ç« å”¯ä¸€æ ‡è¯†                                                                     |
| name        | VARCHAR  | 100      | å¦         | å¦         | å¾½ç« åç§°                                                                         |
| description | VARCHAR  | 500      | å¦         | æ˜¯         | å¾½ç« æè¿°                                                                         |
| icon        | VARCHAR  | 50       | å¦         | æ˜¯         | å¾½ç« å›¾æ ‡(emoji)                                                                  |
| requirement | INT      | -        | å¦         | å¦         | è§£é”æ¡ä»¶æ•°å€¼,é»˜è®¤ 1                                                              |
| type        | VARCHAR  | 50       | å¦         | å¦         | å¾½ç« ç±»å‹:login_count,continuous_login,survey_count,create_count,publish_count ç­‰ |
| points      | INT      | -        | å¦         | å¦         | è§£é”å¾½ç« å¥–åŠ±ç§¯åˆ†,é»˜è®¤ 0                                                          |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `type` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰ç±»å‹æŸ¥è¯¢å¾½ç« 

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "badge_newbie",
  "name": "æ–°æ‰‹ä¸Šè·¯",
  "description": "å®Œæˆç¬¬ä¸€ä¸ªé—®å·",
  "icon": "ğŸ–ï¸",
  "requirement": 1,
  "type": "survey_count",
  "points": 10
}
```

**å†å²å˜æ›´**

- 2025-12-07: æ¨¡å‹è®¾ç½®ä¸º `timestamps: false`ï¼ˆå¾½ç« ä¸ºç³»ç»Ÿé¢„è®¾æ•°æ®ï¼‰
- 2025-12-07: å­—æ®µç±»å‹è°ƒæ•´ä»¥åŒ¹é…å®é™… Model å®šä¹‰

---

### 8. PointHistories (ç§¯åˆ†å†å²è¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç”¨æˆ·ç§¯åˆ†çš„æ‰€æœ‰å˜åŠ¨è®°å½•,ç”¨äºè¿½è¸ªç§¯åˆ†æ¥æºå’Œæ¶ˆè´¹æ˜ç»†ã€‚

**å®ä½“æè¿°**

ç§¯åˆ†å†å²å®ä½“åŒ…å«è®°å½• IDã€ç”¨æˆ· IDã€ç§¯åˆ†å˜åŠ¨å€¼ã€å˜åŠ¨åŸå› ã€ç±»å‹ã€åˆ›å»ºæ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡è®°å½• ID å”¯ä¸€æ ‡è¯†æ¯æ¡ç§¯åˆ†å˜åŠ¨è®°å½•,ç”¨æˆ· ID å…³è”åˆ°ç”¨æˆ·è¡¨æ ‡æ˜ç§¯åˆ†å½’å±ã€‚ç§¯åˆ†å˜åŠ¨å€¼ä¸ºæ­£æ•°è¡¨ç¤ºè·å¾—ç§¯åˆ†,ä¸ºè´Ÿæ•°è¡¨ç¤ºæ¶ˆè´—ç§¯åˆ†ã€‚å˜åŠ¨åŸå› å­—æ®µè¯¦ç»†æè¿°äº†ç§¯åˆ†å˜åŠ¨çš„å…·ä½“æƒ…å¢ƒ(å¦‚â€œå®Œæˆé—®å·ã€Šç”¨æˆ·ä½“éªŒè°ƒç ”ã€‹â€ã€â€œæ¯æ—¥ç™»å½•å¥–åŠ±â€ç­‰)ã€‚ç±»å‹å­—æ®µåŒºåˆ†ç§¯åˆ†çš„è·å¾—(earn)å’Œæ¶ˆè´¹(spend)ä¸¤ç§æƒ…å†µã€‚ç§¯åˆ†å†å²è®°å½•ä¸€æ—¦åˆ›å»ºå°±ä¸ä¼šä¿®æ”¹,å› æ­¤ä¸éœ€è¦ updatedAt å­—æ®µ,ç¡®ä¿ç§¯åˆ†å˜åŠ¨å†å²çš„ä¸å¯ç¯¡æ”¹æ€§ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°  | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                                  |
| --------- | -------- | -------- | ---------- | ---------- | ------------------------------------- |
| id        | VARCHAR  | 50       | æ˜¯         | å¦         | ç§¯åˆ†è®°å½•å”¯ä¸€æ ‡è¯†                      |
| userId    | VARCHAR  | 50       | å¦         | å¦         | ç”¨æˆ· ID,å…³è” users.id                 |
| points    | INT      | -        | å¦         | å¦         | ç§¯åˆ†å˜åŠ¨å€¼(æ­£æ•°ä¸ºå¢åŠ ,è´Ÿæ•°ä¸ºå‡å°‘)     |
| reason    | VARCHAR  | 200      | å¦         | å¦         | ç§¯åˆ†å˜åŠ¨åŸå› æè¿°                      |
| type      | ENUM     | -        | å¦         | å¦         | ç±»å‹:earn(è·å¾—)/spend(æ¶ˆè´¹),é»˜è®¤ earn |
| createdAt | DATETIME | -        | å¦         | å¦         | è®°å½•åˆ›å»ºæ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ                 |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `userId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„ç§¯åˆ†å†å²
- INDEX: `createdAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰æ—¶é—´æ’åº

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "point_123",
  "userId": "user_456",
  "points": 10,
  "reason": "å®Œæˆé—®å·ã€Šç”¨æˆ·ä½“éªŒè°ƒç ”ã€‹",
  "type": "earn",
  "createdAt": "2024-01-01T10:00:00.000Z"
}
```

**å­—æ®µè¯´æ˜**

- `type`: earn(è·å¾—ç§¯åˆ†) / spend(æ¶ˆè´¹ç§¯åˆ†)
- `points`: æ­£æ•°è¡¨ç¤ºå¢åŠ ï¼Œè´Ÿæ•°è¡¨ç¤ºå‡å°‘
- ç§¯åˆ†å†å²è®°å½•åˆ›å»ºåä¸ä¼šä¿®æ”¹ï¼Œå› æ­¤ä¸éœ€è¦ `updatedAt` å­—æ®µ

**å†å²å˜æ›´**

- 2025-12-07: åˆ é™¤äº† `updatedAt` å­—æ®µï¼ˆç§¯åˆ†å†å²ä¸ä¼šæ›´æ–°ï¼‰
- 2025-12-07: å­—æ®µåè°ƒæ•´ï¼š`action`â†’`reason`, `description` åˆå¹¶åˆ° `reason`
- 2025-12-07: è®¾ç½® `timestamps: false`ï¼ˆåªä¿ç•™ createdAtï¼‰

---

### 9. AdminActivities (ç®¡ç†å‘˜æ´»åŠ¨æ—¥å¿—è¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç®¡ç†å‘˜çš„æ‰€æœ‰æ“ä½œè®°å½•,ç”¨äºç³»ç»Ÿå®¡è®¡å’Œæ“ä½œè¿½æº¯ã€‚

**å®ä½“æè¿°**

ç®¡ç†å‘˜æ´»åŠ¨å®ä½“åŒ…å«æ—¥å¿— IDã€ç®¡ç†å‘˜ IDã€ç®¡ç†å‘˜åç§°ã€æ“ä½œæ ‡é¢˜ã€æ“ä½œæè¿°ã€æ“ä½œç±»å‹ã€åˆ›å»ºæ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡æ—¥å¿— ID å”¯ä¸€æ ‡è¯†æ¯æ¡æ“ä½œè®°å½•,ç®¡ç†å‘˜ ID å…³è”åˆ°ç”¨æˆ·è¡¨ç¡®å®šæ“ä½œè€…èº«ä»½ã€‚ç®¡ç†å‘˜åç§°å­—æ®µå†—ä½™å­˜å‚¨äº†æ“ä½œæ—¶çš„ç®¡ç†å‘˜åç§°,é˜²æ­¢ç®¡ç†å‘˜æ”¹ååå½±å“å†å²æ—¥å¿—çš„å¯è¯»æ€§ã€‚æ“ä½œæ ‡é¢˜å’Œæè¿°æä¾›äº†æ“ä½œçš„ç®€è¦å’Œè¯¦ç»†ä¿¡æ¯,æ“ä½œç±»å‹å­—æ®µç”¨äºå¯¹æ—¥å¿—è¿›è¡Œåˆ†ç±»(å¦‚ç”¨æˆ·ç®¡ç†ã€é—®å·å®¡æ ¸ã€ç³»ç»Ÿè®¾ç½®ç­‰)ã€‚è¯¥è¡¨ä¸»è¦ç”¨äºç®¡ç†å‘˜ Dashboard å±•ç¤ºæœ€è¿‘æ“ä½œè®°å½•,ä»¥åŠç”¨æˆ·ç®¡ç†é¡µé¢è®°å½•å°ç¦/è§£å°ç­‰é‡è¦æ“ä½œã€‚æ—¥å¿—è®°å½•ä¸€æ—¦ç”Ÿæˆä¸ä¼šä¿®æ”¹,ä¿è¯å®¡è®¡è®°å½•çš„å®Œæ•´æ€§ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°    | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                           |
| ----------- | -------- | -------- | ---------- | ---------- | ------------------------------ |
| id          | VARCHAR  | 50       | æ˜¯         | å¦         | æ—¥å¿—è®°å½•å”¯ä¸€æ ‡è¯†               |
| adminId     | VARCHAR  | 50       | å¦         | å¦         | ç®¡ç†å‘˜ ID,å…³è” users.id        |
| adminName   | VARCHAR  | 50       | å¦         | æ˜¯         | ç®¡ç†å‘˜åç§°(å†—ä½™å­—æ®µ)           |
| title       | VARCHAR  | 200      | å¦         | æ˜¯         | æ“ä½œæ ‡é¢˜                       |
| description | TEXT     | -        | å¦         | æ˜¯         | æ“ä½œè¯¦ç»†æè¿°                   |
| type        | VARCHAR  | 50       | å¦         | æ˜¯         | æ“ä½œç±»å‹(å¦‚ç”¨æˆ·ç®¡ç†ã€é—®å·å®¡æ ¸) |
| createdAt   | DATETIME | -        | å¦         | å¦         | æ“ä½œæ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ              |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `adminId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç‰¹å®šç®¡ç†å‘˜çš„æ“ä½œè®°å½•
- INDEX: `type` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰æ“ä½œç±»å‹ç­›é€‰
- INDEX: `createdAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰æ—¶é—´æ’åº

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "activity_1701234567890",
  "adminId": "user_admin001",
  "adminName": "admin",
  "title": "å®¡æ ¸é—®å·",
  "description": "å®¡æ ¸é€šè¿‡é—®å·ã€Šç”¨æˆ·ä½“éªŒè°ƒç ”ã€‹",
  "type": "survey_review",
  "createdAt": "2024-01-01T09:30:00.000Z"
}
```

**ä½¿ç”¨åœºæ™¯**

- ç®¡ç†å‘˜ Dashboard å±•ç¤ºæœ€è¿‘æ“ä½œè®°å½•
- ç”¨æˆ·ç®¡ç†é¡µé¢è®°å½•å°ç¦/è§£å°ç­‰æ“ä½œ
- é—®å·å®¡æ ¸é¡µé¢è®°å½•å®¡æ ¸æ“ä½œ

---

### 10. Announcements (å…¬å‘Šè¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ç³»ç»Ÿå…¬å‘Šä¿¡æ¯,ç”±ç®¡ç†å‘˜å‘å¸ƒçš„å…¨å±€é€šçŸ¥ã€‚

**å®ä½“æè¿°**

å…¬å‘Šå®ä½“åŒ…å«å…¬å‘Š IDã€æ ‡é¢˜ã€å†…å®¹ã€ç±»å‹ã€çŠ¶æ€ã€æ¿€æ´»çŠ¶æ€ã€ä¼˜å…ˆçº§ã€å‘å¸ƒæ—¶é—´ã€åˆ›å»ºè€… IDã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡å…¬å‘Š ID å”¯ä¸€æ ‡è¯†æ¯æ¡å…¬å‘Š,æ ‡é¢˜å’Œå†…å®¹ä¸ºå…¬å‘Šçš„æ ¸å¿ƒä¿¡æ¯ã€‚ç±»å‹å­—æ®µåŒºåˆ†ä¸åŒçº§åˆ«çš„å…¬å‘Š(info/warning/success/error),ç”¨äºå‰ç«¯å±•ç¤ºä¸åŒæ ·å¼ã€‚çŠ¶æ€å­—æ®µç®¡ç†å…¬å‘Šçš„ç”Ÿå‘½å‘¨æœŸ(è‰ç¨¿/å·²å‘å¸ƒ),æ¿€æ´»çŠ¶æ€æ§åˆ¶å…¬å‘Šæ˜¯å¦åœ¨å‰ç«¯æ˜¾ç¤ºã€‚ä¼˜å…ˆçº§å­—æ®µç”¨äºæ§åˆ¶å¤šæ¡å…¬å‘Šçš„å±•ç¤ºé¡ºåº,æ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ã€‚å‘å¸ƒæ—¶é—´è®°å½•å…¬å‘Šæ­£å¼å‘å¸ƒçš„æ—¶åˆ»,åˆ›å»ºè€… ID å…³è”åˆ°ç”¨æˆ·è¡¨æ ‡è¯†å‘å¸ƒå…¬å‘Šçš„ç®¡ç†å‘˜ã€‚å…¬å‘Šæ”¯æŒç¼–è¾‘ä¿®æ”¹,æ›´æ–°æ—¶é—´ä¼šè‡ªåŠ¨è®°å½•æœ€åä¿®æ”¹æ—¶é—´ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°    | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                                          |
| ----------- | -------- | -------- | ---------- | ---------- | --------------------------------------------- |
| id          | INTEGER  | -        | æ˜¯         | å¦         | å…¬å‘Š ID,è‡ªå¢ä¸»é”®                              |
| title       | VARCHAR  | 200      | å¦         | å¦         | å…¬å‘Šæ ‡é¢˜                                      |
| content     | TEXT     | -        | å¦         | å¦         | å…¬å‘Šå†…å®¹                                      |
| type        | ENUM     | -        | å¦         | å¦         | å…¬å‘Šç±»å‹:info/warning/success/error,é»˜è®¤ info |
| status      | ENUM     | -        | å¦         | å¦         | çŠ¶æ€:draft(è‰ç¨¿)/published(å·²å‘å¸ƒ),é»˜è®¤ draft |
| isActive    | BOOLEAN  | -        | å¦         | å¦         | æ˜¯å¦æ¿€æ´»æ˜¾ç¤º,é»˜è®¤ true                        |
| priority    | INT      | -        | å¦         | å¦         | ä¼˜å…ˆçº§,æ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜,é»˜è®¤ 0              |
| publishedAt | DATETIME | -        | å¦         | æ˜¯         | å‘å¸ƒæ—¶é—´                                      |
| createdBy   | VARCHAR  | 50       | å¦         | æ˜¯         | åˆ›å»ºè€…(ç®¡ç†å‘˜)ID                              |
| createdAt   | DATETIME | -        | å¦         | å¦         | åˆ›å»ºæ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ                             |
| updatedAt   | DATETIME | -        | å¦         | å¦         | æ›´æ–°æ—¶é—´,è‡ªåŠ¨æ›´æ–°                             |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•,è‡ªå¢
- INDEX: `type` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰ç±»å‹ç­›é€‰å…¬å‘Š
- INDEX: `status` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰çŠ¶æ€ç­›é€‰
- INDEX: `priority` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰ä¼˜å…ˆçº§æ’åº
- INDEX: `createdAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰åˆ›å»ºæ—¶é—´æ’åº

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": 1,
  "title": "ç³»ç»Ÿç»´æŠ¤é€šçŸ¥",
  "content": "ç³»ç»Ÿå°†äº2024å¹´1æœˆ15æ—¥å‡Œæ™¨2:00-4:00è¿›è¡Œä¾‹è¡Œç»´æŠ¤,æœŸé—´å¯èƒ½æ— æ³•è®¿é—®ã€‚",
  "type": "warning",
  "status": "published",
  "isActive": true,
  "priority": 10,
  "publishedAt": "2024-01-10T10:00:00.000Z",
  "createdBy": "user_admin001",
  "createdAt": "2024-01-10T09:00:00.000Z",
  "updatedAt": "2024-01-10T10:00:00.000Z"
}
```

---

### 11. RecycleBins (å›æ”¶ç«™è¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨å·²åˆ é™¤çš„é—®å·æ•°æ®,æ”¯æŒè½¯åˆ é™¤å’Œæ¢å¤åŠŸèƒ½ã€‚

**å®ä½“æè¿°**

å›æ”¶ç«™å®ä½“åŒ…å«å›æ”¶ç«™è®°å½• IDã€åŸé—®å· IDã€é—®å·æ ‡é¢˜ã€æè¿°ã€åˆ†ç±»ã€åŸçŠ¶æ€ã€é¢˜ç›®æ•°é‡ã€ç”¨æˆ· IDã€ä½œè€… IDã€å®Œæ•´é—®å·æ•°æ®ã€åˆ é™¤æ“ä½œè€… IDã€åˆ é™¤æ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡å›æ”¶ç«™è®°å½• ID(ä¸åŸé—®å· ID ç›¸åŒ)å”¯ä¸€æ ‡è¯†æ¯æ¡åˆ é™¤è®°å½•ã€‚é—®å·è¢«åˆ é™¤æ—¶,å…¶åŸºæœ¬ä¿¡æ¯(æ ‡é¢˜ã€æè¿°ã€åˆ†ç±»ã€çŠ¶æ€ç­‰)ä¼šè¢«å­˜å‚¨åˆ°å›æ”¶ç«™ä»¥ä¾¿æŸ¥çœ‹,surveyData å­—æ®µä»¥ JSON æ ¼å¼å­˜å‚¨å®Œæ•´çš„é—®å·æ•°æ®ä»¥ä¾¿æ¢å¤ã€‚ç”¨æˆ· ID å’Œä½œè€… ID å…³è”åˆ°ç”¨æˆ·è¡¨æ ‡æ˜é—®å·çš„å½’å±,åˆ é™¤æ“ä½œè€… ID è®°å½•äº†æ‰§è¡Œåˆ é™¤æ“ä½œçš„ç”¨æˆ·(å¯èƒ½æ˜¯ä½œè€…æœ¬äººæˆ–ç®¡ç†å‘˜)ã€‚åˆ é™¤æ—¶é—´è®°å½•äº†é—®å·è¢«åˆ é™¤çš„æ—¶åˆº,ç³»ç»Ÿä¼šå®šæœŸæ¸…ç†è¶…è¿‡ 30 å¤©çš„å›æ”¶ç«™æ•°æ®ã€‚å‰ç«¯æœ‰å®Œæ•´çš„å›æ”¶ç«™é¡µé¢(TrashPage.vue),æ”¯æŒæŸ¥çœ‹ã€æ¢å¤å’Œæ°¸ä¹…åˆ é™¤æ“ä½œã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°       | æ•°æ®ç±»å‹ | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                            |
| -------------- | -------- | -------- | ---------- | ---------- | ------------------------------- |
| id             | VARCHAR  | 50       | æ˜¯         | å¦         | å›æ”¶ç«™è®°å½• ID(ä¸åŸé—®å· ID ç›¸åŒ) |
| surveyId       | VARCHAR  | 50       | å¦         | æ˜¯         | åŸé—®å· ID(å†—ä½™å­—æ®µ)             |
| title          | VARCHAR  | 500      | å¦         | æ˜¯         | é—®å·æ ‡é¢˜                        |
| description    | TEXT     | -        | å¦         | æ˜¯         | é—®å·æè¿°                        |
| category       | VARCHAR  | 100      | å¦         | æ˜¯         | é—®å·åˆ†ç±»                        |
| originalStatus | VARCHAR  | 50       | å¦         | æ˜¯         | åˆ é™¤å‰çš„é—®å·çŠ¶æ€                |
| questions      | INT      | -        | å¦         | æ˜¯         | é¢˜ç›®æ•°é‡                        |
| userId         | VARCHAR  | 50       | å¦         | æ˜¯         | ç”¨æˆ· ID(é—®å·å½’å±)               |
| authorId       | VARCHAR  | 50       | å¦         | æ˜¯         | ä½œè€… ID(åˆ«å,åŒ userId)         |
| surveyData     | JSON     | -        | å¦         | æ˜¯         | å®Œæ•´é—®å·æ•°æ®,ç”¨äºæ¢å¤           |
| deletedBy      | VARCHAR  | 50       | å¦         | æ˜¯         | åˆ é™¤æ“ä½œè€… ID                   |
| deletedAt      | DATETIME | -        | å¦         | å¦         | åˆ é™¤æ—¶é—´,é»˜è®¤å½“å‰æ—¶é—´           |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `userId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„åˆ é™¤è®°å½•
- INDEX: `deletedAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰åˆ é™¤æ—¶é—´æ’åºå’Œå®šæœŸæ¸…ç†

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "survey_1701234567890",
  "surveyId": "survey_1701234567890",
  "title": "ç”¨æˆ·ä½“éªŒè°ƒç ”é—®å·",
  "description": "æœ¬é—®å·æ—¨åœ¨äº†è§£ç”¨æˆ·å¯¹äº§å“çš„ä½¿ç”¨ä½“éªŒ",
  "category": "å­¦æœ¯è°ƒç ”",
  "originalStatus": "published",
  "questions": 5,
  "userId": "user_1701234567890",
  "authorId": "user_1701234567890",
  "surveyData": {
    "id": "survey_1701234567890",
    "title": "ç”¨æˆ·ä½“éªŒè°ƒç ”é—®å·",
    "questionList": []
  },
  "deletedBy": "user_1701234567890",
  "deletedAt": "2024-01-05T16:00:00.000Z"
}
```

**ä½¿ç”¨åœºæ™¯**

- ç”¨æˆ·åˆ é™¤é—®å·åè‡ªåŠ¨ç§»å…¥å›æ”¶ç«™
- æ”¯æŒä»å›æ”¶ç«™æ¢å¤é—®å·
- æ”¯æŒä»å›æ”¶ç«™æ°¸ä¹…åˆ é™¤
- è¶…è¿‡ 30 å¤©è‡ªåŠ¨æ¸…ç†

---

### 12. Reports (æŠ¥å‘Šè¡¨)

**è¡¨çš„åŸºç¡€æè¿°**

å­˜å‚¨ AI ç”Ÿæˆçš„ä¸ªäººåˆ†ææŠ¥å‘Š,åŸºäºç”¨æˆ·ç­”é¢˜æƒ…å†µç”Ÿæˆä¸ªæ€§åŒ–çš„æŠ¥å‘Šå†…å®¹ã€‚

**å®ä½“æè¿°**

æŠ¥å‘Šå®ä½“åŒ…å«æŠ¥å‘Š IDã€ç”¨æˆ· IDã€é—®å· IDã€æŠ¥å‘Šæ ‡é¢˜ã€é—®å·æ ‡é¢˜ã€åˆ†ç±»ã€æŠ¥å‘Šå†…å®¹ã€çŠ¶æ€ã€ç”Ÿæˆå®Œæˆæ—¶é—´ã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰å±æ€§ã€‚ç³»ç»Ÿé€šè¿‡æŠ¥å‘Š ID å”¯ä¸€æ ‡è¯†æ¯ä»½æŠ¥å‘Š,ç”¨æˆ· ID å…³è”åˆ°ç”¨æˆ·è¡¨æ ‡æ˜æŠ¥å‘Šå½’å±,é—®å· ID å…³è”åˆ°é—®å·è¡¨æ ‡æ˜æŠ¥å‘ŠåŸºäºå“ªä»½é—®å·ç”Ÿæˆã€‚æŠ¥å‘Šæ ‡é¢˜ç”¨äºåœ¨å‰ç«¯å±•ç¤º,é—®å·æ ‡é¢˜å’Œåˆ†ç±»ä¸ºå†—ä½™å­—æ®µä¾›å¿«é€Ÿè®¿é—®ã€‚æŠ¥å‘Šå†…å®¹ä½¿ç”¨ LONGTEXT ç±»å‹å­˜å‚¨ Markdown æ ¼å¼çš„ AI ç”Ÿæˆå†…å®¹,æ”¯æŒé•¿æ–‡æœ¬æŠ¥å‘Šã€‚çŠ¶æ€å­—æ®µç®¡ç†æŠ¥å‘Šç”Ÿæˆè¿›ç¨‹(ç”Ÿæˆä¸­/å·²å®Œæˆ/å¤±è´¥),ç”Ÿæˆå®Œæˆæ—¶é—´è®°å½• AI åˆ†æå®Œæˆçš„æ—¶åˆ»ã€‚æŠ¥å‘Šç”Ÿæˆåæ”¯æŒæŸ¥çœ‹å’Œåˆ é™¤,ä½†ä¸æ”¯æŒç¼–è¾‘ä¿®æ”¹ã€‚

**è¡¨ç»“æ„**

| å­—æ®µåç§°    | æ•°æ®ç±»å‹   | å­—æ®µå¤§å° | æ˜¯å¦ä¸ºä¸»é”® | æ˜¯å¦å¯ä¸ºç©º | è¯´æ˜                                             |
| ----------- | ---------- | -------- | ---------- | ---------- | ------------------------------------------------ |
| id          | VARCHAR    | 50       | æ˜¯         | å¦         | æŠ¥å‘Šå”¯ä¸€æ ‡è¯†                                     |
| userId      | VARCHAR    | 50       | å¦         | å¦         | ç”¨æˆ· ID,å…³è” users.id                            |
| surveyId    | VARCHAR    | 50       | å¦         | æ˜¯         | é—®å· ID,å…³è” surveys.id                          |
| title       | VARCHAR    | 200      | å¦         | å¦         | æŠ¥å‘Šæ ‡é¢˜                                         |
| surveyTitle | VARCHAR    | 200      | å¦         | æ˜¯         | é—®å·æ ‡é¢˜(å†—ä½™å­—æ®µ)                               |
| category    | VARCHAR    | 100      | å¦         | æ˜¯         | é—®å·åˆ†ç±»(å†—ä½™å­—æ®µ)                               |
| content     | TEXT(LONG) | -        | å¦         | æ˜¯         | æŠ¥å‘Šå†…å®¹(Markdown æ ¼å¼)                          |
| status      | ENUM       | -        | å¦         | å¦         | çŠ¶æ€:generating/completed/failed,é»˜è®¤ generating |
| generatedAt | DATETIME   | -        | å¦         | æ˜¯         | ç”Ÿæˆå®Œæˆæ—¶é—´                                     |
| createdAt   | DATETIME   | -        | å¦         | å¦         | åˆ›å»ºæ—¶é—´,è‡ªåŠ¨ç”Ÿæˆ                                |
| updatedAt   | DATETIME   | -        | å¦         | å¦         | æ›´æ–°æ—¶é—´,è‡ªåŠ¨æ›´æ–°                                |

**ç´¢å¼•è¯´æ˜**

- PRIMARY KEY: `id` - ä¸»é”®ç´¢å¼•
- INDEX: `userId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢ç”¨æˆ·çš„æŠ¥å‘Š
- INDEX: `surveyId` - æ™®é€šç´¢å¼•,ç”¨äºæŸ¥è¯¢é—®å·çš„æŠ¥å‘Š
- INDEX: `status` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰çŠ¶æ€ç­›é€‰
- INDEX: `createdAt` - æ™®é€šç´¢å¼•,ç”¨äºæŒ‰åˆ›å»ºæ—¶é—´æ’åº

**ç¤ºä¾‹æ•°æ®**

```json
{
  "id": "report_1701234567890",
  "userId": "user_1701234567890",
  "surveyId": "survey_1701234567890",
  "title": "ç”¨æˆ·ä½“éªŒè°ƒç ” - ä¸ªäººåˆ†ææŠ¥å‘Š",
  "surveyTitle": "ç”¨æˆ·ä½“éªŒè°ƒç ”é—®å·",
  "category": "å­¦æœ¯è°ƒç ”",
  "content": "# ä¸ªäººåˆ†ææŠ¥å‘Š\n\næ ¹æ®æ‚¨çš„ç­”é¢˜æƒ…å†µ,æˆ‘ä»¬åˆ†æå‡ºä»¥ä¸‹ç»“æœ...\n\n## ç»¼åˆè¯„ä»·\næ‚¨å¯¹äº§å“çš„æ•´ä½“æ»¡æ„åº¦è¾ƒé«˜...",
  "status": "completed",
  "generatedAt": "2024-01-02T14:35:00.000Z",
  "createdAt": "2024-01-02T14:30:00.000Z",
  "updatedAt": "2024-01-02T14:35:00.000Z"
}
```

---

## ğŸ”— å…³è”å…³ç³»

### ER å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users    â”‚1      nâ”‚   surveys   â”‚
â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚             â”‚
â”‚  - id       â”‚  userId â”‚  - id       â”‚
â”‚  - username â”‚         â”‚  - title    â”‚
â”‚  - role     â”‚         â”‚  - status   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â”‚1                      â”‚1
       â”‚                       â”‚
       â†“n                      â†“n
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   answers   â”‚         â”‚  comments   â”‚
â”‚             â”‚         â”‚             â”‚
â”‚  - id       â”‚         â”‚  - id       â”‚
â”‚  - userId   â”‚         â”‚  - userId   â”‚
â”‚  - surveyId â”‚         â”‚  - surveyId â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users    â”‚
â”‚             â”‚1
â”‚  - id       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’ favorites (n)
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚1
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’ UserBadges (n) â†â”€â”€â”€â”€ badges (1)
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’ PointHistories (n)
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ Reports (n)
```

### å¤–é”®å…³ç³»

1. **surveys.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥åˆ›å»ºå¤šä¸ªé—®å·
   - çº§è”æ“ä½œ: ON DELETE CASCADE

2. **surveys.categoryId â†’ categories.id**

   - ä¸€ä¸ªåˆ†ç±»åŒ…å«å¤šä¸ªé—®å·
   - çº§è”æ“ä½œ: ON DELETE SET NULL

3. **answers.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥æäº¤å¤šä¸ªç­”æ¡ˆ
   - çº§è”æ“ä½œ: ON DELETE CASCADE

4. **answers.surveyId â†’ surveys.id**

   - ä¸€ä¸ªé—®å·å¯ä»¥æœ‰å¤šä¸ªç­”æ¡ˆ
   - çº§è”æ“ä½œ: ON DELETE CASCADE

5. **comments.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥å‘è¡¨å¤šæ¡è¯„è®º
   - çº§è”æ“ä½œ: ON DELETE CASCADE

6. **comments.surveyId â†’ surveys.id**

   - ä¸€ä¸ªé—®å·å¯ä»¥æœ‰å¤šæ¡è¯„è®º
   - çº§è”æ“ä½œ: ON DELETE CASCADE

7. **favorites.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ”¶è—å¤šä¸ªé—®å·
   - çº§è”æ“ä½œ: ON DELETE CASCADE

8. **favorites.surveyId â†’ surveys.id**

   - ä¸€ä¸ªé—®å·å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ”¶è—
   - çº§è”æ“ä½œ: ON DELETE CASCADE

9. **PointHistories.userId â†’ users.id**

   - ä¸€ä¸ªç”¨æˆ·æœ‰å¤šæ¡ç§¯åˆ†è®°å½•
   - çº§è”æ“ä½œ: ON DELETE CASCADE

10. **Reports.userId â†’ users.id**

    - ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªæŠ¥å‘Š
    - çº§è”æ“ä½œ: ON DELETE CASCADE

11. **Reports.surveyId â†’ surveys.id**

    - ä¸€ä¸ªé—®å·å¯ä»¥ç”Ÿæˆå¤šä¸ªæŠ¥å‘Š
    - çº§è”æ“ä½œ: ON DELETE CASCADE

12. **AdminActivities.adminId â†’ users.id**
    - ä¸€ä¸ªç®¡ç†å‘˜æœ‰å¤šæ¡æ“ä½œè®°å½•
    - çº§è”æ“ä½œ: ON DELETE CASCADE

---

## ğŸ“Œ æ•°æ®åº“è®¾è®¡åŸåˆ™

### 1. è§„èŒƒåŒ–

- éµå¾ªç¬¬ä¸‰èŒƒå¼ (3NF)
- å‡å°‘æ•°æ®å†—ä½™
- éƒ¨åˆ†å†—ä½™å­—æ®µç”¨äºæ€§èƒ½ä¼˜åŒ– (å¦‚ `surveyTitle`)

### 2. ç´¢å¼•ç­–ç•¥

- ä¸»é”®è‡ªåŠ¨ç´¢å¼•
- å¤–é”®å­—æ®µæ·»åŠ ç´¢å¼•
- å¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- è”åˆç´¢å¼•ç”¨äºå¤åˆæŸ¥è¯¢

### 3. æ•°æ®ç±»å‹

- ID: VARCHAR(50) (æ”¯æŒè‡ªå®šä¹‰ ID æ ¼å¼)
- æ—¶é—´: DATETIME (è‡ªåŠ¨ç®¡ç† createdAt/updatedAt)
- JSON: å­˜å‚¨å¤æ‚ç»“æ„ (questionList, answers, tags ç­‰)
- ENUM: é™å®šå€¼èŒƒå›´ (status, role ç­‰)

### 4. å­—ç¬¦é›†

- ä½¿ç”¨ utf8mb4 æ”¯æŒ emoji å’Œç‰¹æ®Šå­—ç¬¦
- æ’åºè§„åˆ™ utf8mb4_unicode_ci (ä¸åŒºåˆ†å¤§å°å†™)

---

## ğŸ”’ æ•°æ®å®‰å…¨

### 1. å¯†ç åŠ å¯†

- ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨
- å¯†ç å­—æ®µé•¿åº¦ VARCHAR(255)
- å¯†ç åœ¨æ¨¡å‹ hook ä¸­è‡ªåŠ¨åŠ å¯†

### 2. æ•æ„Ÿå­—æ®µ

- ç”¨æˆ·å¯†ç ä¸è¿”å›åˆ°å‰ç«¯
- ä½¿ç”¨ `toSafeObject()` æ–¹æ³•è¿‡æ»¤

### 3. è½¯åˆ é™¤

- ä½¿ç”¨ RecycleBins è¡¨å®ç°è½¯åˆ é™¤
- ä¿ç•™åˆ é™¤æ•°æ® 30 å¤©

---

## ğŸš€ åˆå§‹åŒ–è„šæœ¬

### åˆ›å»ºæ•°æ®åº“

```sql
CREATE DATABASE IF NOT EXISTS questionnaire_db
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_unicode_ci;

USE questionnaire_db;
```

### Sequelize è‡ªåŠ¨åŒæ­¥

```javascript
// server.js
sequelize
  .sync({ alter: true })
  .then(() => {
    console.log("âœ… æ•°æ®åº“è¡¨åŒæ­¥æˆåŠŸ");
  })
  .catch((err) => {
    console.error("âŒ æ•°æ®åº“åŒæ­¥å¤±è´¥:", err);
  });
```

**æ³¨æ„**:

- `sync({ alter: true })` ä¼šè‡ªåŠ¨è°ƒæ•´è¡¨ç»“æ„
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Migration

---

## ğŸ“Š æ•°æ®å¤‡ä»½ä¸æ¢å¤

### å¤‡ä»½

```bash
# å¤‡ä»½æ•´ä¸ªæ•°æ®åº“
mysqldump -u root -p questionnaire_db > backup.sql

# å¤‡ä»½ç‰¹å®šè¡¨
mysqldump -u root -p questionnaire_db users surveys answers > backup_main.sql
```

### æ¢å¤

```bash
# æ¢å¤æ•°æ®åº“
mysql -u root -p questionnaire_db < backup.sql
```

---

## ğŸ” æŸ¥è¯¢ä¼˜åŒ–å»ºè®®

### 1. ä½¿ç”¨ç´¢å¼•

```sql
-- æŸ¥è¯¢æ—¶ä½¿ç”¨ç´¢å¼•å­—æ®µ
SELECT * FROM surveys WHERE status = 'published';
SELECT * FROM users WHERE username = 'test';
```

### 2. é¿å…å…¨è¡¨æ‰«æ

```sql
-- é¿å… SELECT *
SELECT id, title, category FROM surveys;

-- ä½¿ç”¨ LIMIT é™åˆ¶ç»“æœ
SELECT * FROM answers LIMIT 10;
```

### 3. ä½¿ç”¨è¿æ¥æŸ¥è¯¢

```sql
-- ä½¿ç”¨ JOIN ä»£æ›¿å¤šæ¬¡æŸ¥è¯¢
SELECT s.*, u.username, u.nickname
FROM surveys s
JOIN users u ON s.userId = u.id
WHERE s.status = 'published';
```

### 4. JSON å­—æ®µæŸ¥è¯¢

```sql
-- æŸ¥è¯¢ JSON å­—æ®µ
SELECT * FROM surveys WHERE JSON_CONTAINS(tags, '"æŠ€æœ¯"');
SELECT * FROM users WHERE JSON_EXTRACT(tags, '$[0]') = 'é˜…è¯»';
```

---

## ğŸ“ˆ æ•°æ®ç»Ÿè®¡æŸ¥è¯¢ç¤ºä¾‹

### ç”¨æˆ·ç»Ÿè®¡

```sql
-- ç”¨æˆ·æ€»æ•°
SELECT COUNT(*) FROM users;

-- ä»Šæ—¥æ–°å¢ç”¨æˆ·
SELECT COUNT(*) FROM users
WHERE DATE(createdAt) = CURDATE();

-- æ´»è·ƒç”¨æˆ· (æœ€è¿‘7å¤©ç™»å½•)
SELECT COUNT(*) FROM users
WHERE lastLoginAt >= DATE_SUB(NOW(), INTERVAL 7 DAY);
```

### é—®å·ç»Ÿè®¡

```sql
-- é—®å·æ€»æ•° (æŒ‰çŠ¶æ€åˆ†ç»„)
SELECT status, COUNT(*) as count
FROM surveys
GROUP BY status;

-- æœ€çƒ­é—¨çš„é—®å· (æŒ‰å‚ä¸äººæ•°)
SELECT id, title, participantCount
FROM surveys
WHERE status = 'published'
ORDER BY participantCount DESC
LIMIT 10;

-- å¹³å‡é—®å·è¯„åˆ†
SELECT AVG(rating) as avg_rating
FROM surveys
WHERE ratingCount > 0;
```

### ç­”é¢˜ç»Ÿè®¡

```sql
-- ç­”é¢˜æ€»æ•°
SELECT COUNT(*) FROM answers;

-- ä»Šæ—¥ç­”é¢˜æ•°
SELECT COUNT(*) FROM answers
WHERE DATE(submittedAt) = CURDATE();

-- é—®å·å®Œæˆç‡
SELECT
  s.id,
  s.title,
  s.participantCount,
  COUNT(a.id) as answers,
  (COUNT(a.id) / s.participantCount * 100) as completion_rate
FROM surveys s
LEFT JOIN answers a ON s.id = a.surveyId
GROUP BY s.id;
```

---

## ğŸ› ï¸ ç»´æŠ¤å»ºè®®

### 1. å®šæœŸæ¸…ç†

- æ¸…ç†è¿‡æœŸçš„ RecycleBin æ•°æ® (è¶…è¿‡ 30 å¤©)
- æ¸…ç†æ— æ•ˆçš„ Token è®°å½•

### 2. ç´¢å¼•ä¼˜åŒ–

- å®šæœŸåˆ†ææ…¢æŸ¥è¯¢
- æ ¹æ®æŸ¥è¯¢æ¨¡å¼è°ƒæ•´ç´¢å¼•

### 3. æ•°æ®å½’æ¡£

- å®šæœŸå½’æ¡£å†å²æ•°æ®
- ä¿æŒä¸»è¡¨æ•°æ®é‡åœ¨åˆç†èŒƒå›´

### 4. æ€§èƒ½ç›‘æ§

- ç›‘æ§æ•°æ®åº“è¿æ¥æ•°
- ç›‘æ§æŸ¥è¯¢æ‰§è¡Œæ—¶é—´
- ç›‘æ§ç£ç›˜ç©ºé—´

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ID ç”Ÿæˆ**: ä½¿ç”¨ `generateId()` å‡½æ•°ç”Ÿæˆå”¯ä¸€ IDï¼Œæ ¼å¼å¦‚ `user_1701234567890`
2. **æ—¶åŒº**: æ•°æ®åº“æ—¶åŒºè®¾ç½®ä¸º UTC+8
3. **JSON å­—æ®µ**: ä½¿ç”¨ Sequelize çš„ JSON ç±»å‹ï¼ŒMySQL 5.7.8+ æ”¯æŒ
4. **çº§è”åˆ é™¤**: åˆ é™¤ç”¨æˆ·æ—¶ä¼šè‡ªåŠ¨åˆ é™¤å…³è”çš„é—®å·ã€ç­”æ¡ˆç­‰
5. **äº‹åŠ¡**: å…³é”®æ“ä½œä½¿ç”¨äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§

---

## ğŸ“‹ æ•°æ®åº“å˜æ›´å†å²

### 2025-12-07

**åˆ é™¤æœªä½¿ç”¨å’Œå†—ä½™å­—æ®µ**

- âœ… åˆ é™¤ `surveys.rating` å­—æ®µï¼ˆä¸ averageRating é‡å¤ï¼Œå‰ç«¯ä»…ä½¿ç”¨ averageRatingï¼‰
- âœ… åˆ é™¤ `surveys.thumbnail` å­—æ®µï¼ˆåç«¯å®šä¹‰ä½†å‰åç«¯ä»æœªä½¿ç”¨ï¼‰
- âœ… åˆ é™¤ `categories.description` å­—æ®µï¼ˆå‰ç«¯æœªä½¿ç”¨ï¼‰
- âœ… åˆ é™¤ `categories.displayOrder` å­—æ®µï¼ˆæ‰€æœ‰å€¼ç›¸åŒä¸º 0ï¼Œæ— å®é™…æ„ä¹‰ï¼‰
- âœ… åˆ é™¤ `categories.createdAt` å’Œ `updatedAt` å­—æ®µï¼ˆå‰ç«¯æ— åˆ›å»ºåˆ†ç±»åŠŸèƒ½ï¼‰
- âœ… åˆ é™¤ `point_histories.updatedAt` å­—æ®µï¼ˆç§¯åˆ†å†å²è®°å½•ä¸ä¼šæ›´æ–°ï¼‰
- âœ… æ›´æ–°ç›¸å…³ä»£ç ï¼š
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/Survey.js`
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/Category.js`ï¼ˆè®¾ç½® timestamps: falseï¼‰
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/PointHistory.js`ï¼ˆè®¾ç½® timestamps: falseï¼‰
  - æ§åˆ¶å™¨ï¼š`server/controllers/categoryController.js`ï¼ˆæ”¹ç”¨ name æ’åºï¼‰
- âœ… è¿ç§»è„šæœ¬ï¼š`server/migrations/remove-unused-fields.sql`

**åˆ é™¤é‡å¤å­—æ®µï¼ˆ2025-12-07 ä¸‹åˆï¼‰**

- âœ… åˆ é™¤ `surveys.participants` å­—æ®µï¼ˆç»Ÿä¸€ä½¿ç”¨ participantCountï¼‰
- âœ… åˆ é™¤ `surveys.responses` å­—æ®µï¼ˆå®Œå…¨æœªä½¿ç”¨ï¼Œç»Ÿä¸€ä½¿ç”¨ responseCountï¼‰
- âœ… æ›´æ–°å‰ç«¯ä»£ç ï¼š
  - ç®¡ç†å‘˜ä»ªè¡¨ç›˜ï¼š`DashboardPage.vue`ï¼ˆ2 å¤„ï¼‰
  - é—®å·åˆ—è¡¨ï¼š`QuestionnaireListPage.vue`ï¼ˆ3 å¤„ï¼‰
  - åˆ—è¡¨ç­›é€‰ï¼š`useListFilter.js`ï¼ˆ2 å¤„ï¼‰
  - æ¨¡æ¿é€»è¾‘ï¼š`useTemplates.js`ï¼ˆ2 å¤„ï¼‰
  - é—®å·ç¼–è¾‘å™¨ï¼š`useQuestionnaireEditor.js`ï¼ˆ2 å¤„ï¼‰
  - é¦–é¡µé€»è¾‘ï¼š`useHomeLogic.js`ï¼ˆ2 å¤„ï¼‰
  - é—®å·å¡ç‰‡ï¼š`SurveyCardEnhanced.vue`ï¼ˆ2 å¤„ï¼‰
  - API æ¥å£ï¼š`questionnaire.js`ã€`admin.js`ï¼ˆ4 å¤„ï¼‰
- âœ… æ›´æ–°åç«¯ä»£ç ï¼š
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/Survey.js`
- âœ… è¿ç§»è„šæœ¬ï¼š`server/migrations/remove-participant-response-duplicates.sql`

**å­—æ®µä¿ç•™è¯´æ˜**

- âœ… ä¿ç•™ `surveys.settings` å­—æ®µï¼ˆåç«¯åˆ›å»ºé—®å·æ—¶æœ‰ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `surveys.category` å’Œ `categoryId` å­—æ®µï¼ˆå‰ç«¯åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼‰
- âœ… ä¿ç•™ `surveys.duration` å­—æ®µï¼ˆå‰ç«¯å¤šå¤„ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `surveys.averageRating` å­—æ®µï¼ˆå‰ç«¯å¤§é‡ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `answers.surveyTitle` å­—æ®µï¼ˆå‰ç«¯ç­”é¢˜è®°å½•é¡µé¢ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `reports.surveyTitle` å­—æ®µï¼ˆå‰ç«¯æŠ¥å‘Šé¡µé¢ä½¿ç”¨ï¼‰
- âœ… ä¿ç•™ `reports.answerId` å­—æ®µï¼ˆç”¨äºå…³è”å…·ä½“ç­”æ¡ˆè®°å½•ï¼‰

### 2025-12-06

**åˆ é™¤æœªä½¿ç”¨å­—æ®µ**

- âœ… åˆ é™¤ `categories.color` å­—æ®µï¼ˆåç«¯æœ‰è¯»å†™ä½†å‰ç«¯æœªä½¿ç”¨ï¼‰
- âœ… åˆ é™¤ `categories.icon` å­—æ®µï¼ˆåç«¯æœ‰è¯»å†™ä½†å‰ç«¯æœªä½¿ç”¨ï¼‰
- âœ… æ›´æ–°ç›¸å…³ä»£ç ï¼š
  - æ¨¡å‹æ–‡ä»¶ï¼š`server/models/Category.js`
  - æ§åˆ¶å™¨ï¼š`server/controllers/categoryController.js`
  - æ§åˆ¶å™¨ï¼š`server/controllers/surveyController.js`
- âœ… è¿ç§»è„šæœ¬ï¼š`server/migrations/remove-category-color-icon.sql`

**å­—æ®µä¿ç•™è¯´æ˜**

- âœ… ä¿ç•™ `reports.answerId` å­—æ®µï¼ˆæ­£åœ¨ä½¿ç”¨ä¸­ï¼Œç”¨äºå…³è”ç­”æ¡ˆè®°å½•ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.3  
**æœ€åæ›´æ–°**: 2025 å¹´ 12 æœˆ 7 æ—¥
