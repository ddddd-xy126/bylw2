# é—®å·ç³»ç»Ÿ - å‰ç«¯æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

å‰ç«¯é‡‡ç”¨ **Vue 3 + Element Plus + Pinia + Vite** æ„å»ºçš„ç°ä»£åŒ–å•é¡µåº”ç”¨ï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒå’Œä¸°å¯Œçš„äº¤äº’æ•ˆæœã€‚

### æŠ€æœ¯æ ˆ
- **æ ¸å¿ƒæ¡†æ¶**: Vue 3 (Composition API)
- **UI ç»„ä»¶åº“**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **æ„å»ºå·¥å…·**: Vite
- **HTTP å®¢æˆ·ç«¯**: Axios
- **æ•°æ®å¯è§†åŒ–**: ECharts
- **åŠ¨ç”»**: GSAP, Lottie, Three.js
- **æ ·å¼**: SCSS
- **å…¶ä»–**: vuedraggable (æ‹–æ‹½), html2canvas, jsPDF

---

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```
client/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                        # API æ¥å£å°è£…å±‚
â”‚   â”‚   â”œâ”€â”€ index.js                # Axios å®ä¾‹é…ç½®ã€æ‹¦æˆªå™¨
â”‚   â”‚   â”œâ”€â”€ auth.js                 # è®¤è¯ç›¸å…³æ¥å£
â”‚   â”‚   â”œâ”€â”€ user.js                 # ç”¨æˆ·ç›¸å…³æ¥å£
â”‚   â”‚   â”œâ”€â”€ survey.js               # é—®å·ç›¸å…³æ¥å£
â”‚   â”‚   â”œâ”€â”€ questionnaire.js        # é—®å·åˆ›å»º/ç¼–è¾‘æ¥å£
â”‚   â”‚   â”œâ”€â”€ report.js               # æŠ¥å‘Šç›¸å…³æ¥å£
â”‚   â”‚   â””â”€â”€ admin.js                # ç®¡ç†å‘˜æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                     # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ main.scss               # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ element.scss            # Element Plus ä¸»é¢˜å®šåˆ¶
â”‚   â”‚   â”œâ”€â”€ theme.scss              # ä¸»é¢˜å˜é‡
â”‚   â”‚   â””â”€â”€ img/                    # å›¾ç‰‡èµ„æº
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                 # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ QuestionnaireEditor.vue # é—®å·ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ QuizFeedback.vue        # ç­”é¢˜åé¦ˆ (åŸºç¡€ç‰ˆ)
â”‚   â”‚   â”œâ”€â”€ QuizFeedbackEnhanced.vue# ç­”é¢˜åé¦ˆ (å¢å¼ºç‰ˆ)
â”‚   â”‚   â”œâ”€â”€ SurveyCardEnhanced.vue  # é—®å·å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DynamicProgress.vue     # åŠ¨æ€è¿›åº¦æ¡
â”‚   â”‚   â”œâ”€â”€ LiquidFill.vue          # æ°´çƒå›¾ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TreeGrowth.vue          # æˆé•¿æ ‘ 3D ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChangeAvatarDialog.vue  # ä¿®æ”¹å¤´åƒå¼¹çª—
â”‚   â”‚   â”œâ”€â”€ ChangePasswordDialog.vue# ä¿®æ”¹å¯†ç å¼¹çª—
â”‚   â”‚   â””â”€â”€ CommentsDialog.vue      # è¯„è®ºå¼¹çª—
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/                # ç»„åˆå¼ API (é€»è¾‘å¤ç”¨)
â”‚   â”‚   â”œâ”€â”€ useHomeLogic.js         # é¦–é¡µé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useQuestionnaireLogic.js# é—®å·å¡«å†™é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useQuestionnaireEditor.js# é—®å·ç¼–è¾‘é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useAnswerTimer.js       # ç­”é¢˜è®¡æ—¶å™¨
â”‚   â”‚   â””â”€â”€ useTemplates.js         # é—®å·æ¨¡æ¿é€»è¾‘
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                      # React é£æ ¼çš„ Hooks
â”‚   â”‚   â””â”€â”€ useListFilter.js        # åˆ—è¡¨ç­›é€‰ Hook
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/                    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ UserLayout.vue          # ç”¨æˆ·å¸ƒå±€ (å‰å°)
â”‚   â”‚   â””â”€â”€ AdminLayout.vue         # ç®¡ç†å‘˜å¸ƒå±€ (åå°)
â”‚   â”‚
â”‚   â”œâ”€â”€ router/                     # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.js                # è·¯ç”±ä¸»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ userRoutes.js           # ç”¨æˆ·è·¯ç”±
â”‚   â”‚   â””â”€â”€ adminRoutes.js          # ç®¡ç†å‘˜è·¯ç”±
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                      # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.js                # Store å…¥å£
â”‚   â”‚   â”œâ”€â”€ user.js                 # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ questionnaire.js        # é—®å·çŠ¶æ€
â”‚   â”‚   â””â”€â”€ data.js                 # æ•°æ®ç¼“å­˜çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ views/                      # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ frontend/               # å‰å°é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ home/               # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/               # ç™»å½•/æ³¨å†Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ questionnaire/      # é—®å·å¡«å†™
â”‚   â”‚   â”‚   â”œâ”€â”€ survey/             # é—®å·è¯¦æƒ…/ç»Ÿè®¡
â”‚   â”‚   â”‚   â”œâ”€â”€ user/               # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”‚   â””â”€â”€ rankings/           # æ’è¡Œæ¦œ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ backend/                # åå°é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ admin/              # ç®¡ç†å‘˜é¡µé¢
â”‚   â”‚   â”‚       â”œâ”€â”€ DashboardPage.vue           # ä»ªè¡¨æ¿
â”‚   â”‚   â”‚       â””â”€â”€ components/                 # ç®¡ç†åå°ç»„ä»¶
â”‚   â”‚   â”‚           â”œâ”€â”€ questionnaires/         # é—®å·ç®¡ç†
â”‚   â”‚   â”‚           â”œâ”€â”€ users/                  # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚           â””â”€â”€ announcements/          # å…¬å‘Šç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ common/                 # é€šç”¨é¡µé¢
â”‚   â”‚   â””â”€â”€ error/                  # é”™è¯¯é¡µé¢ (403, 404)
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue                     # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js                     # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ public/                         # å…¬å…±é™æ€èµ„æº
â”œâ”€â”€ docs/                           # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ db.json                         # Mock æ•°æ® (å·²åºŸå¼ƒ)
â”œâ”€â”€ package.json                    # ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.js                  # Vite é…ç½®
â””â”€â”€ index.html                      # HTML æ¨¡æ¿
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1ï¸âƒ£ ç”¨æˆ·è®¤è¯æ¨¡å— (`src/views/frontend/auth/`)

#### ç™»å½•é¡µ (`LoginPage.vue`)
- **åŠŸèƒ½**: ç”¨æˆ·ç™»å½•ã€Token å­˜å‚¨
- **è¡¨å•éªŒè¯**: ç”¨æˆ·å/å¯†ç æ ¼å¼éªŒè¯
- **è‡ªåŠ¨è·³è½¬**: ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µæˆ–åŸé¡µé¢
- **é”™è¯¯æç¤º**: ç™»å½•å¤±è´¥æç¤º

#### æ³¨å†Œé¡µ (`RegisterPage.vue`)
- **åŠŸèƒ½**: ç”¨æˆ·æ³¨å†Œã€è‡ªåŠ¨ç™»å½•
- **è¡¨å•éªŒè¯**: ç”¨æˆ·åå”¯ä¸€æ€§ã€å¯†ç å¼ºåº¦ã€é‚®ç®±æ ¼å¼
- **åˆå§‹ç§¯åˆ†**: æ–°ç”¨æˆ·èµ é€åˆå§‹ç§¯åˆ†

---

### 2ï¸âƒ£ é¦–é¡µæ¨¡å— (`src/views/frontend/home/`)

#### é¦–é¡µ (`HomePage.vue`)
- **é—®å·å¹¿åœº**: å±•ç¤ºæ‰€æœ‰å·²å‘å¸ƒçš„é—®å·
- **åˆ†ç±»ç­›é€‰**: æŒ‰åˆ†ç±»ã€æ ‡ç­¾ç­›é€‰é—®å·
- **æœç´¢åŠŸèƒ½**: å…³é”®è¯æœç´¢é—®å·
- **æ’åº**: æœ€æ–°ã€æœ€çƒ­ã€è¯„åˆ†æ’åº
- **åˆ†é¡µåŠ è½½**: ç€‘å¸ƒæµæˆ–åˆ†é¡µåŠ è½½
- **ä½¿ç”¨ Composable**: `useHomeLogic.js`

**æ ¸å¿ƒé€»è¾‘** (`composables/useHomeLogic.js`):
```javascript
export function useHomeLogic() {
  const surveys = ref([])
  const categories = ref([])
  const selectedCategory = ref('all')
  const searchKeyword = ref('')
  
  // è·å–é—®å·åˆ—è¡¨
  async function fetchSurveys() {
    const data = await surveyAPI.getSurveys({
      category: selectedCategory.value,
      keyword: searchKeyword.value
    })
    surveys.value = data
  }
  
  return {
    surveys,
    categories,
    fetchSurveys,
    // ...
  }
}
```

---

### 3ï¸âƒ£ é—®å·åˆ›å»º/ç¼–è¾‘æ¨¡å— (`src/components/QuestionnaireEditor.vue`)

#### é—®å·ç¼–è¾‘å™¨ç»„ä»¶
- **é¢˜ç›®ç±»å‹**: å•é€‰ã€å¤šé€‰ã€å¡«ç©ºã€è¯„åˆ†ã€æ’åº
- **æ‹–æ‹½æ’åº**: ä½¿ç”¨ `vuedraggable` è°ƒæ•´é¢˜ç›®é¡ºåº
- **è·³è½¬é€»è¾‘**: é…ç½®é¢˜ç›®è·³è½¬è§„åˆ™
- **æ¨¡æ¿æ”¯æŒ**: ä»æ¨¡æ¿åˆ›å»ºé—®å·
- **è‰ç¨¿ä¿å­˜**: è‡ªåŠ¨/æ‰‹åŠ¨ä¿å­˜è‰ç¨¿
- **å‘å¸ƒå®¡æ ¸**: æäº¤å®¡æ ¸åå‘å¸ƒ

**æ ¸å¿ƒåŠŸèƒ½** (`composables/useQuestionnaireEditor.js`):
```javascript
export function useQuestionnaireEditor(surveyId) {
  const questionnaire = ref({
    title: '',
    description: '',
    category: '',
    questions: []
  })
  
  // æ·»åŠ é¢˜ç›®
  function addQuestion(type) {
    questionnaire.value.questions.push({
      id: generateId(),
      type,
      title: '',
      options: type === 'choice' ? ['é€‰é¡¹1', 'é€‰é¡¹2'] : []
    })
  }
  
  // ä¿å­˜è‰ç¨¿
  async function saveDraft() {
    await questionnaireAPI.saveDraft(questionnaire.value)
  }
  
  // æäº¤å‘å¸ƒ
  async function publish() {
    await questionnaireAPI.publish(questionnaire.value)
  }
  
  return { questionnaire, addQuestion, saveDraft, publish }
}
```

---

### 4ï¸âƒ£ é—®å·å¡«å†™æ¨¡å— (`src/views/frontend/questionnaire/`)

#### é—®å·å¡«å†™é¡µ (`QuestionnairePage.vue`)
- **é¢˜ç›®å±•ç¤º**: é€é¢˜æˆ–æ•´é¡µå±•ç¤º
- **ç­”æ¡ˆä¿å­˜**: å®æ—¶ä¿å­˜ç­”æ¡ˆåˆ°æœ¬åœ°
- **è¿›åº¦æ˜¾ç¤º**: ç­”é¢˜è¿›åº¦æ¡
- **è·³è½¬é€»è¾‘**: æ ¹æ®ç­”æ¡ˆè·³è½¬é¢˜ç›®
- **è®¡æ—¶åŠŸèƒ½**: ç»Ÿè®¡ç­”é¢˜æ—¶é•¿
- **æäº¤éªŒè¯**: å¿…å¡«é¢˜éªŒè¯

**æ ¸å¿ƒé€»è¾‘** (`composables/useQuestionnaireLogic.js`):
```javascript
export function useQuestionnaireLogic(surveyId) {
  const survey = ref(null)
  const answers = ref({})
  const currentQuestionIndex = ref(0)
  
  // æäº¤ç­”æ¡ˆ
  async function submitAnswers() {
    const result = await answerAPI.submit({
      surveyId,
      answers: Object.values(answers.value),
      duration: timer.value
    })
    
    // ç§¯åˆ†å¥–åŠ±
    await addPoints(10, 'å®Œæˆé—®å·')
    
    return result
  }
  
  // è·³è½¬é€»è¾‘å¤„ç†
  function handleJumpLogic(answer) {
    const question = survey.value.questions[currentQuestionIndex.value]
    if (question.jumpLogic) {
      const targetIndex = question.jumpLogic[answer]
      if (targetIndex !== undefined) {
        currentQuestionIndex.value = targetIndex
      }
    }
  }
  
  return { survey, answers, submitAnswers, handleJumpLogic }
}
```

---

### 5ï¸âƒ£ ä¸ªäººä¸­å¿ƒæ¨¡å— (`src/views/frontend/user/`)

#### ä¸ªäººä¿¡æ¯é¡µ (`components/profile/InfoPage.vue`)
- **èµ„æ–™å±•ç¤º**: å¤´åƒã€æ˜µç§°ã€ç®€ä»‹ã€æ ‡ç­¾ç­‰
- **èµ„æ–™ç¼–è¾‘**: ä¿®æ”¹ä¸ªäººä¿¡æ¯
- **å¤´åƒä¸Šä¼ **: ä½¿ç”¨ `ChangeAvatarDialog.vue`
- **å¯†ç ä¿®æ”¹**: ä½¿ç”¨ `ChangePasswordDialog.vue`

#### æˆ‘çš„é—®å· (`components/profile/SurveysPage.vue`)
- **é—®å·åˆ—è¡¨**: æˆ‘åˆ›å»ºçš„é—®å·
- **çŠ¶æ€ç­›é€‰**: è‰ç¨¿ã€å¾…å®¡æ ¸ã€å·²å‘å¸ƒç­‰
- **é—®å·æ“ä½œ**: ç¼–è¾‘ã€åˆ é™¤ã€æŸ¥çœ‹ç»Ÿè®¡

#### æˆ‘çš„ç­”é¢˜ (`components/profile/AnswersPage.vue`)
- **ç­”é¢˜è®°å½•**: å·²å®Œæˆçš„é—®å·åˆ—è¡¨
- **ç­”æ¡ˆæŸ¥çœ‹**: æŸ¥çœ‹æˆ‘çš„ç­”æ¡ˆ
- **æŠ¥å‘Šç”Ÿæˆ**: ç”Ÿæˆä¸ªæ€§åŒ–æŠ¥å‘Š

#### æˆå°±å¾½ç«  (`components/profile/AchievementsPage.vue`)
- **å¾½ç« å±•ç¤º**: å·²è§£é”/æœªè§£é”å¾½ç« 
- **è§£é”æ¡ä»¶**: æ˜¾ç¤ºè§£é”è¦æ±‚
- **3D æ•ˆæœ**: ä½¿ç”¨ `TreeGrowth.vue` å±•ç¤ºæˆé•¿æ ‘

---

### 6ï¸âƒ£ æ•°æ®ç»Ÿè®¡æ¨¡å— (`src/views/frontend/survey/`)

#### é—®å·ç»Ÿè®¡é¡µ (`SurveyStatsPage.vue`)
- **åŸºç¡€ç»Ÿè®¡**: å‚ä¸äººæ•°ã€å®Œæˆç‡ã€å¹³å‡åˆ†
- **ç­”æ¡ˆåˆ†å¸ƒ**: ä½¿ç”¨ ECharts å±•ç¤ºå„é¢˜ç­”æ¡ˆåˆ†å¸ƒ
- **å›¾è¡¨ç±»å‹**: é¥¼å›¾ã€æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾
- **æ•°æ®å¯¼å‡º**: å¯¼å‡º Excel (å¯é€‰)

**å›¾è¡¨ç¤ºä¾‹**:
```javascript
import * as echarts from 'echarts'

function renderChart(questionData) {
  const chart = echarts.init(chartRef.value)
  
  chart.setOption({
    title: { text: questionData.title },
    tooltip: {},
    xAxis: { data: questionData.options },
    yAxis: {},
    series: [{
      type: 'bar',
      data: questionData.counts
    }]
  })
}
```

---

### 7ï¸âƒ£ AI æŠ¥å‘Šæ¨¡å— (`src/api/report.js`)

#### æŠ¥å‘Šç”Ÿæˆ
- **è§¦å‘æ—¶æœº**: ç­”é¢˜å®Œæˆå
- **ç”Ÿæˆè¿‡ç¨‹**: è°ƒç”¨ Coze APIï¼Œå¼‚æ­¥ç”ŸæˆæŠ¥å‘Š
- **çŠ¶æ€è½®è¯¢**: è½®è¯¢æŠ¥å‘Šç”ŸæˆçŠ¶æ€
- **æŠ¥å‘Šå±•ç¤º**: Markdown æ¸²æŸ“
- **PDF ä¸‹è½½**: ä¸‹è½½ PDF æ ¼å¼æŠ¥å‘Š

**API è°ƒç”¨**:
```javascript
// ç”ŸæˆæŠ¥å‘Š
export async function generateReport(data) {
  return apiClient.post('/reports/generate', data)
}

// è·å–æŠ¥å‘ŠçŠ¶æ€
export async function getReportStatus(reportId) {
  return apiClient.get(`/reports/${reportId}/status`)
}

// ä¸‹è½½æŠ¥å‘Š
export function downloadReport(reportId) {
  window.open(`${baseURL}/reports/${reportId}/download`)
}
```

---

### 8ï¸âƒ£ ç®¡ç†åå°æ¨¡å— (`src/views/backend/admin/`)

#### ä»ªè¡¨æ¿ (`DashboardPage.vue`)
- **ç³»ç»Ÿç»Ÿè®¡**: ç”¨æˆ·æ•°ã€é—®å·æ•°ã€ç­”é¢˜æ•°
- **æ•°æ®å›¾è¡¨**: è¶‹åŠ¿å›¾ã€ç”¨æˆ·æ´»è·ƒåº¦
- **æ´»åŠ¨æ—¥å¿—**: ç®¡ç†å‘˜æ“ä½œè®°å½•

#### ç”¨æˆ·ç®¡ç† (`components/users/UserManagePage.vue`)
- **ç”¨æˆ·åˆ—è¡¨**: åˆ†é¡µå±•ç¤ºæ‰€æœ‰ç”¨æˆ·
- **ç­›é€‰æ’åº**: æŒ‰è§’è‰²ã€çŠ¶æ€ç­›é€‰
- **ç”¨æˆ·æ“ä½œ**: ä¿®æ”¹è§’è‰²ã€å°ç¦/è§£ç¦
- **ä½¿ç”¨ Hook**: `useListFilter.js` å¤„ç†ç­›é€‰å’Œåˆ†é¡µ

#### é—®å·ç®¡ç† (`components/questionnaires/`)
- **é—®å·åˆ—è¡¨** (`QuestionnaireListPage.vue`): æ‰€æœ‰é—®å·
- **å¾…å®¡æ ¸** (`PendingQuestionnairesPage.vue`): å®¡æ ¸é—®å·
- **å®¡æ ¸æ“ä½œ**: é€šè¿‡/æ‹’ç»ï¼Œæ·»åŠ å®¡æ ¸æ„è§

#### å…¬å‘Šç®¡ç† (`components/announcements/AnnouncementManagePage.vue`)
- **å…¬å‘Šåˆ—è¡¨**: æ‰€æœ‰å…¬å‘Š
- **å‘å¸ƒå…¬å‘Š**: åˆ›å»ºæ–°å…¬å‘Š
- **ç¼–è¾‘åˆ é™¤**: ä¿®æ”¹/åˆ é™¤å…¬å‘Š

---

## ğŸ§© æ ¸å¿ƒç»„ä»¶è¯¦è§£

### `QuestionnaireEditor.vue` - é—®å·ç¼–è¾‘å™¨

**åŠŸèƒ½**:
- æ‹–æ‹½æ’åºé¢˜ç›®
- æ·»åŠ /åˆ é™¤é¢˜ç›®
- é…ç½®é¢˜ç›®ç±»å‹å’Œé€‰é¡¹
- è·³è½¬é€»è¾‘è®¾ç½®
- è‰ç¨¿ä¿å­˜

**ä½¿ç”¨**:
```vue
<QuestionnaireEditor
  v-model="questionnaire"
  @save="handleSave"
  @publish="handlePublish"
/>
```

---

### `QuizFeedbackEnhanced.vue` - ç­”é¢˜åé¦ˆ

**åŠŸèƒ½**:
- ç­”é¢˜åŠ¨ç”»æ•ˆæœ
- æ­£ç¡®/é”™è¯¯æç¤º
- ç§¯åˆ†å¥–åŠ±åŠ¨ç”»
- Lottie åŠ¨ç”»æ’­æ”¾

**ä½¿ç”¨**:
```vue
<QuizFeedbackEnhanced
  :show="showFeedback"
  :correct="isCorrect"
  :points="earnedPoints"
  @close="showFeedback = false"
/>
```

---

### `TreeGrowth.vue` - 3D æˆé•¿æ ‘

**åŠŸèƒ½**:
- Three.js 3D åœºæ™¯
- æ ¹æ®ç”¨æˆ·ç­‰çº§ç”Ÿé•¿
- äº¤äº’æ—‹è½¬

**ä½¿ç”¨**:
```vue
<TreeGrowth :level="userLevel" />
```

---

### `DynamicProgress.vue` - åŠ¨æ€è¿›åº¦æ¡

**åŠŸèƒ½**:
- GSAP åŠ¨ç”»
- ç™¾åˆ†æ¯”æ˜¾ç¤º
- é¢œè‰²æ¸å˜

**ä½¿ç”¨**:
```vue
<DynamicProgress :percent="60" color="#409EFF" />
```

---

## ğŸ—ƒï¸ çŠ¶æ€ç®¡ç† (Pinia)

### User Store (`store/user.js`)

```javascript
import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () => ({
    token: localStorage.getItem('token') || '',
    userInfo: null,
    isAdmin: false
  }),
  
  getters: {
    isLoggedIn: (state) => !!state.token,
    userId: (state) => state.userInfo?.id
  },
  
  actions: {
    async login(credentials) {
      const { token, user } = await authAPI.login(credentials)
      this.token = token
      this.userInfo = user
      this.isAdmin = user.role === 'admin'
      localStorage.setItem('token', token)
    },
    
    logout() {
      this.token = ''
      this.userInfo = null
      this.isAdmin = false
      localStorage.removeItem('token')
    },
    
    async fetchUserInfo() {
      const user = await authAPI.getCurrentUser()
      this.userInfo = user
      this.isAdmin = user.role === 'admin'
    }
  }
})
```

---

### Questionnaire Store (`store/questionnaire.js`)

```javascript
export const useQuestionnaireStore = defineStore('questionnaire', {
  state: () => ({
    currentQuestionnaire: null,
    answers: {},
    startTime: null
  }),
  
  actions: {
    startQuestionnaire(survey) {
      this.currentQuestionnaire = survey
      this.answers = {}
      this.startTime = Date.now()
    },
    
    saveAnswer(questionId, answer) {
      this.answers[questionId] = answer
      // ä¿å­˜åˆ° localStorage
      localStorage.setItem(
        `answers_${this.currentQuestionnaire.id}`,
        JSON.stringify(this.answers)
      )
    },
    
    clearAnswers() {
      this.answers = {}
      this.startTime = null
    }
  }
})
```

---

## ğŸ›£ï¸ è·¯ç”±é…ç½®

### è·¯ç”±å®ˆå«

```javascript
// router/index.js
router.beforeEach(async (to, from, next) => {
  const userStore = useUserStore()
  
  // éœ€è¦ç™»å½•çš„é¡µé¢
  if (to.meta.requiresAuth && !userStore.isLoggedIn) {
    next({ path: '/login', query: { redirect: to.fullPath } })
    return
  }
  
  // éœ€è¦ç®¡ç†å‘˜æƒé™çš„é¡µé¢
  if (to.meta.requiresAdmin && !userStore.isAdmin) {
    next('/403')
    return
  }
  
  next()
})
```

### è·¯ç”±æ‡’åŠ è½½

```javascript
const routes = [
  {
    path: '/questionnaire/:id',
    component: () => import('@/views/frontend/questionnaire/QuestionnairePage.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/admin',
    component: () => import('@/layouts/AdminLayout.vue'),
    meta: { requiresAuth: true, requiresAdmin: true },
    children: [
      {
        path: 'dashboard',
        component: () => import('@/views/backend/admin/DashboardPage.vue')
      }
    ]
  }
]
```

---

## ğŸŒ API è°ƒç”¨

### Axios å®ä¾‹é…ç½® (`api/index.js`)

```javascript
const instance = axios.create({
  baseURL: 'http://localhost:3000/api',
  timeout: 120000
})

// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ  Token
instance.interceptors.request.use(config => {
  const userStore = useUserStore()
  if (userStore.token) {
    config.headers.Authorization = `Bearer ${userStore.token}`
  }
  return config
})

// å“åº”æ‹¦æˆªå™¨ - ç»Ÿä¸€å¤„ç†é”™è¯¯
instance.interceptors.response.use(
  res => res.data?.data !== undefined ? res.data.data : res.data,
  err => {
    if (err.response?.status === 401) {
      useUserStore().logout()
      router.push('/login')
    }
    return Promise.reject(err)
  }
)
```

---

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### SCSS å˜é‡ (`assets/theme.scss`)

```scss
// ä¸»é¢˜è‰²
$primary-color: #409EFF;
$success-color: #67C23A;
$warning-color: #E6A23C;
$danger-color: #F56C6C;

// å­—ä½“
$font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
$font-size-base: 14px;

// é—´è·
$spacing-xs: 4px;
$spacing-sm: 8px;
$spacing-md: 16px;
$spacing-lg: 24px;
$spacing-xl: 32px;
```

### Element Plus ä¸»é¢˜å®šåˆ¶ (`assets/element.scss`)

```scss
@forward 'element-plus/theme-chalk/src/common/var.scss' with (
  $colors: (
    'primary': (
      'base': #409EFF
    )
  )
);
```

---

## ğŸ“¦ æ‰“åŒ…é…ç½® (`vite.config.js`)

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src')
    }
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true
      }
    }
  },
  build: {
    outDir: 'dist',
    sourcemap: false,
    rollupOptions: {
      output: {
        manualChunks: {
          'element-plus': ['element-plus'],
          'echarts': ['echarts']
        }
      }
    }
  }
})
```

---

## ğŸ§ª å¼€å‘å»ºè®®

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ Composition API
- æå–å¯å¤ç”¨é€»è¾‘åˆ° `composables/`
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
- ä½¿ç”¨ `<script setup>` è¯­æ³•

### æ€§èƒ½ä¼˜åŒ–
- è·¯ç”±æ‡’åŠ è½½
- å›¾ç‰‡æ‡’åŠ è½½
- è™šæ‹Ÿåˆ—è¡¨ (é•¿åˆ—è¡¨)
- æŒ‰éœ€å¼•å…¥ Element Plus ç»„ä»¶

### æœ€ä½³å®è·µ
- API è°ƒç”¨ç»Ÿä¸€å°è£…
- é”™è¯¯å¤„ç†ç»Ÿä¸€å¤„ç†
- ä½¿ç”¨ TypeScript (å¯é€‰)
- ç¼–å†™å•å…ƒæµ‹è¯• (æ¨è)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´12æœˆ1æ—¥
