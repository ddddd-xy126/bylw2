# ä¸ªæ€§åŒ–é—®å·æ¨èç³»ç»Ÿå®ç°æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°æ™ºèƒ½é—®å·åˆ†æç³»ç»Ÿä¸­åŸºäºç”¨æˆ·æ ‡ç­¾çš„ä¸ªæ€§åŒ–é—®å·æ¨èåŠŸèƒ½çš„å®ç°åŸç†ã€ç®—æ³•è®¾è®¡å’ŒæŠ€æœ¯ç»†èŠ‚ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- åŸºäºç”¨æˆ·å…´è¶£æ ‡ç­¾çš„æ™ºèƒ½æ¨è
- å¤šç»´åº¦ç»¼åˆè¯„åˆ†ç®—æ³•
- å®æ—¶åŠ¨æ€æ¨èæ’åº
- æ”¯æŒæ— æ ‡ç­¾ç”¨æˆ·çš„éšæœºæ¨è

---

## ğŸ¯ æ¨èç®—æ³•è®¾è®¡

### ç®—æ³•åŸç†

ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿé‡‡ç”¨**æ··åˆæ¨èç®—æ³•**ï¼Œç»“åˆäº†ä»¥ä¸‹ä¸‰ä¸ªç»´åº¦ï¼š

1. **å†…å®¹ç›¸ä¼¼åº¦** (Content-based Filtering) - 50%æƒé‡
2. **è´¨é‡è¯„åˆ†** (Quality Score) - 30%æƒé‡
3. **çƒ­åº¦æŒ‡æ ‡** (Popularity Score) - 20%æƒé‡

### æ¨èå¾—åˆ†è®¡ç®—å…¬å¼

```javascript
recommendScore = tagScore Ã— 0.5 + ratingScore Ã— 0.3 + popularityScore Ã— 0.2
```

å…¶ä¸­ï¼š

- `tagScore`: ç”¨æˆ·æ ‡ç­¾ä¸é—®å·æ ‡ç­¾çš„åŒ¹é…åº¦
- `ratingScore`: é—®å·è¯„åˆ†å½’ä¸€åŒ–å€¼
- `popularityScore`: å‚ä¸äººæ•°å½’ä¸€åŒ–å€¼

---

## ğŸ’» æ ¸å¿ƒä»£ç å®ç°

### 1. æ¨èé€»è¾‘ä¸»å‡½æ•°

**ä½ç½®**: `client/src/composables/useHomeLogic.js`

```javascript
case "recommended":
  // æ™ºèƒ½æ¨èï¼šæ ¹æ®ç”¨æˆ·æ ‡ç­¾è¿›è¡Œç›¸å…³æ€§æ¨è
  const userTags = userStore.profile?.tags || [];
  console.log("[æ¨èç³»ç»Ÿ] ç”¨æˆ·æ ‡ç­¾:", userTags);

  if (userTags && userTags.length > 0) {
    // æœ‰æ ‡ç­¾æ—¶ï¼šè®¡ç®—ç›¸å…³æ€§å¾—åˆ†
    filtered.forEach((survey) => {
      const surveyTags = survey.tags || [];

      // è®¡ç®—æ ‡ç­¾åŒ¹é…åº¦
      const matchCount = surveyTags.filter((tag) =>
        userTags.includes(tag)
      ).length;
      const tagScore = matchCount / Math.max(userTags.length, 1);

      // ç»¼åˆè¯„åˆ†ï¼šæ ‡ç­¾åŒ¹é…(50%) + è¯„åˆ†(30%) + å‚ä¸äººæ•°(20%)
      survey.recommendScore =
        tagScore * 0.5 +
        ((survey.rating || 0) / 5) * 0.3 +
        Math.min(
          (survey.participantCount || survey.participants || 0) / 1000,
          1
        ) * 0.2;
    });

    // æŒ‰æ¨èå¾—åˆ†æ’åºï¼ˆå¾—åˆ†é«˜çš„åœ¨å‰ï¼‰
    filtered.sort(
      (a, b) => (b.recommendScore || 0) - (a.recommendScore || 0)
    );

    console.log(
      "[æ¨èç³»ç»Ÿ] åŸºäºæ ‡ç­¾åŒ¹é…æ¨èï¼Œå‰3ä¸ªé—®å·:",
      filtered.slice(0, 3).map((s) => ({
        title: s.title,
        tags: s.tags,
        score: s.recommendScore,
      }))
    );
  } else {
    // æ— æ ‡ç­¾æ—¶ï¼šéšæœºæ‰“ä¹±é¡ºåºå±•ç¤º
    filtered = filtered.sort(() => Math.random() - 0.5);
    console.log("[æ¨èç³»ç»Ÿ] ç”¨æˆ·æ— æ ‡ç­¾ï¼Œéšæœºæ¨è");
  }
  break;
```

---

## ğŸ“Š ç®—æ³•è¯¦ç»†è¯´æ˜

### 2.1 æ ‡ç­¾åŒ¹é…åº¦è®¡ç®— (Tag Score)

**ç›®çš„**: è¡¡é‡ç”¨æˆ·å…´è¶£ä¸é—®å·å†…å®¹çš„ç›¸å…³æ€§

**è®¡ç®—æ–¹æ³•**:

```javascript
const matchCount = surveyTags.filter((tag) => userTags.includes(tag)).length;
const tagScore = matchCount / Math.max(userTags.length, 1);
```

**ç¤ºä¾‹**:

```javascript
// ç”¨æˆ·æ ‡ç­¾
userTags = ["æŠ€æœ¯", "ç¼–ç¨‹", "å‰ç«¯"]

// é—®å·Aæ ‡ç­¾
surveyA.tags = ["æŠ€æœ¯", "ç¼–ç¨‹"]
matchCount = 2
tagScore = 2 / 3 = 0.667

// é—®å·Bæ ‡ç­¾
surveyB.tags = ["æŠ€æœ¯", "åç«¯", "Java"]
matchCount = 1
tagScore = 1 / 3 = 0.333
```

**æƒé‡**: 50% (æœ€é«˜æƒé‡ï¼Œä½“ç°å†…å®¹ç›¸å…³æ€§çš„é‡è¦æ€§)

### 2.2 è´¨é‡è¯„åˆ† (Rating Score)

**ç›®çš„**: ç¡®ä¿æ¨èé«˜è´¨é‡çš„é—®å·

**è®¡ç®—æ–¹æ³•**:

```javascript
const ratingScore = (survey.rating || 0) / 5;
```

**å½’ä¸€åŒ–**: å°†è¯„åˆ†ä» 0-5 èŒƒå›´è½¬æ¢ä¸º 0-1 èŒƒå›´

**ç¤ºä¾‹**:

```javascript
// é—®å·è¯„åˆ†ä¸º 4.5
ratingScore = 4.5 / 5 = 0.9

// é—®å·è¯„åˆ†ä¸º 3.0
ratingScore = 3.0 / 5 = 0.6
```

**æƒé‡**: 30%

### 2.3 çƒ­åº¦æŒ‡æ ‡ (Popularity Score)

**ç›®çš„**: å¹³è¡¡æ–°é—®å·ä¸çƒ­é—¨é—®å·ï¼Œé¿å…å†·å¯åŠ¨é—®é¢˜

**è®¡ç®—æ–¹æ³•**:

```javascript
const popularityScore = Math.min(
  (survey.participantCount || survey.participants || 0) / 1000,
  1
);
```

**å½’ä¸€åŒ–**: ä»¥ 1000 äººä¸ºæ»¡åˆ†åŸºå‡†ï¼Œè¶…è¿‡ 1000 äººå‚ä¸çš„é—®å·å¾—åˆ†ä¸º 1

**ç¤ºä¾‹**:

```javascript
// 500äººå‚ä¸
popularityScore = Math.min(500 / 1000, 1) = 0.5

// 1500äººå‚ä¸
popularityScore = Math.min(1500 / 1000, 1) = 1.0
```

**æƒé‡**: 20%

---

## ğŸ”„ å®Œæ•´æ¨èæµç¨‹

### æµç¨‹å›¾

```
å¼€å§‹
  â†“
æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æ ‡ç­¾
  â†“
æœ‰æ ‡ç­¾? â”€â”€â”€â”€ å¦ â”€â”€â”€â†’ éšæœºæ‰“ä¹±é—®å·åˆ—è¡¨ â†’ è¿”å›ç»“æœ
  â†“
  æ˜¯
  â†“
éå†æ‰€æœ‰é—®å·
  â†“
è®¡ç®—æ¯ä¸ªé—®å·çš„ä¸‰ä¸ªç»´åº¦å¾—åˆ†:
  - æ ‡ç­¾åŒ¹é…åº¦ (50%)
  - è´¨é‡è¯„åˆ† (30%)
  - çƒ­åº¦æŒ‡æ ‡ (20%)
  â†“
è®¡ç®—ç»¼åˆæ¨èå¾—åˆ†
  â†“
æŒ‰æ¨èå¾—åˆ†é™åºæ’åº
  â†“
è®°å½•æ—¥å¿—å¹¶è¿”å›æ’åºåçš„é—®å·åˆ—è¡¨
  â†“
ç»“æŸ
```

### å…·ä½“æ­¥éª¤

1. **è·å–ç”¨æˆ·æ ‡ç­¾**

   ```javascript
   const userTags = userStore.profile?.tags || [];
   ```

2. **åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æ ‡ç­¾**

   - æœ‰æ ‡ç­¾ â†’ æ‰§è¡Œæ™ºèƒ½æ¨èç®—æ³•
   - æ— æ ‡ç­¾ â†’ éšæœºæ¨è

3. **éå†é—®å·åˆ—è¡¨è®¡ç®—å¾—åˆ†**

   ```javascript
   filtered.forEach((survey) => {
     // è®¡ç®—å„ç»´åº¦å¾—åˆ†
     // åŠ æƒæ±‚å’Œå¾—åˆ°æœ€ç»ˆå¾—åˆ†
   });
   ```

4. **æ’åº**

   ```javascript
   filtered.sort((a, b) => (b.recommendScore || 0) - (a.recommendScore || 0));
   ```

5. **è¿”å›ç»“æœ**
   - å‰ç«¯å±•ç¤ºå‰ 20 ä¸ªæ¨èé—®å·
   - æ§åˆ¶å°è¾“å‡ºå‰ 3 ä¸ªé—®å·çš„æ¨èè¯¦æƒ…

---

## ğŸ¨ å‰ç«¯é›†æˆ

### åœ¨é¦–é¡µä¸­çš„ä½¿ç”¨

**æ–‡ä»¶**: `client/src/views/frontend/home/HomePage.vue`

```vue
<script setup>
import { useHomeLogic } from "@/composables/useHomeLogic";
import { useListFilter } from "@/hooks/useListFilter";

// è·å–é—®å·æ•°æ®å’Œæ¨èé€»è¾‘
const { surveys, userStore } = useHomeLogic();

// ä½¿ç”¨åˆ—è¡¨è¿‡æ»¤å™¨
const { sortBy, filteredList, handleSort } = useListFilter({
  sourceList: surveys,
  searchFields: ["searchText"],
});

// è®¾ç½®é»˜è®¤ä¸ºæ¨èæ’åº
sortBy.value = "recommended";
handleSort();

// é™åˆ¶é¦–é¡µæ˜¾ç¤ºå‰20æ¡
const topSurveys = computed(() => (filteredList.value || []).slice(0, 20));
</script>
```

### æ’åºé€‰é¡¹

ç³»ç»Ÿæ”¯æŒä¸‰ç§æ’åºæ–¹å¼ï¼š

```javascript
const sortOptions = [
  { label: "æ¨è", value: "recommended" }, // æ™ºèƒ½æ¨è
  { label: "æœ€æ–°", value: "latest" }, // æŒ‰åˆ›å»ºæ—¶é—´
  { label: "æœ€çƒ­", value: "hot" }, // æŒ‰å‚ä¸äººæ•°
];
```

---

## ğŸ“ˆ æ¨èæ•ˆæœç¤ºä¾‹

### ç¤ºä¾‹åœºæ™¯

**ç”¨æˆ·ä¿¡æ¯**:

```json
{
  "username": "tech_enthusiast",
  "tags": ["æŠ€æœ¯", "ç¼–ç¨‹", "AI"]
}
```

**é—®å·åˆ—è¡¨**:

| é—®å· ID | æ ‡é¢˜         | æ ‡ç­¾             | è¯„åˆ† | å‚ä¸äººæ•° |
| ------- | ------------ | ---------------- | ---- | -------- |
| S1      | AI æŠ€æœ¯è°ƒç ”  | ["AI", "æŠ€æœ¯"]   | 4.5  | 800      |
| S2      | å‰ç«¯å¼€å‘è°ƒæŸ¥ | ["ç¼–ç¨‹", "å‰ç«¯"] | 4.0  | 600      |
| S3      | å¸‚åœºè°ƒç ”é—®å· | ["å¸‚åœº", "ç”¨æˆ·"] | 3.5  | 1200     |

**æ¨èå¾—åˆ†è®¡ç®—**:

**é—®å· S1 (AI æŠ€æœ¯è°ƒç ”)**:

- æ ‡ç­¾åŒ¹é…: 2/3 = 0.667
- è´¨é‡è¯„åˆ†: 4.5/5 = 0.9
- çƒ­åº¦æŒ‡æ ‡: 800/1000 = 0.8
- **æ€»å¾—åˆ†**: 0.667Ã—0.5 + 0.9Ã—0.3 + 0.8Ã—0.2 = **0.764**

**é—®å· S2 (å‰ç«¯å¼€å‘è°ƒæŸ¥)**:

- æ ‡ç­¾åŒ¹é…: 1/3 = 0.333
- è´¨é‡è¯„åˆ†: 4.0/5 = 0.8
- çƒ­åº¦æŒ‡æ ‡: 600/1000 = 0.6
- **æ€»å¾—åˆ†**: 0.333Ã—0.5 + 0.8Ã—0.3 + 0.6Ã—0.2 = **0.527**

**é—®å· S3 (å¸‚åœºè°ƒç ”é—®å·)**:

- æ ‡ç­¾åŒ¹é…: 0/3 = 0
- è´¨é‡è¯„åˆ†: 3.5/5 = 0.7
- çƒ­åº¦æŒ‡æ ‡: 1000/1000 = 1.0
- **æ€»å¾—åˆ†**: 0Ã—0.5 + 0.7Ã—0.3 + 1.0Ã—0.2 = **0.410**

**æ¨èæ’åº**: S1 > S2 > S3

---

## ğŸ” è°ƒè¯•ä¸æ—¥å¿—

### æ§åˆ¶å°æ—¥å¿—

æ¨èç³»ç»Ÿä¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š

```javascript
// 1. ç”¨æˆ·æ ‡ç­¾
console.log("[æ¨èç³»ç»Ÿ] ç”¨æˆ·æ ‡ç­¾:", userTags);
// è¾“å‡º: [æ¨èç³»ç»Ÿ] ç”¨æˆ·æ ‡ç­¾: ["æŠ€æœ¯", "ç¼–ç¨‹", "AI"]

// 2. æ¨èç»“æœï¼ˆå‰3ä¸ªï¼‰
console.log(
  "[æ¨èç³»ç»Ÿ] åŸºäºæ ‡ç­¾åŒ¹é…æ¨èï¼Œå‰3ä¸ªé—®å·:",
  filtered.slice(0, 3).map((s) => ({
    title: s.title,
    tags: s.tags,
    score: s.recommendScore,
  }))
);
// è¾“å‡º:
// [æ¨èç³»ç»Ÿ] åŸºäºæ ‡ç­¾åŒ¹é…æ¨èï¼Œå‰3ä¸ªé—®å·: [
//   { title: "AIæŠ€æœ¯è°ƒç ”", tags: ["AI", "æŠ€æœ¯"], score: 0.764 },
//   { title: "å‰ç«¯å¼€å‘è°ƒæŸ¥", tags: ["ç¼–ç¨‹", "å‰ç«¯"], score: 0.527 },
//   ...
// ]

// 3. æ— æ ‡ç­¾æƒ…å†µ
console.log("[æ¨èç³»ç»Ÿ] ç”¨æˆ·æ— æ ‡ç­¾ï¼Œéšæœºæ¨è");
```

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### å½“å‰å®ç°çš„ä¼˜åŠ¿

âœ… **ç®€å•é«˜æ•ˆ**: è®¡ç®—å¤æ‚åº¦ O(n)ï¼Œé€‚åˆä¸­å°è§„æ¨¡æ•°æ®é›†  
âœ… **å¯è§£é‡Šæ€§å¼º**: æ¨èç»“æœæœ‰æ˜ç¡®çš„å¾—åˆ†ä¾æ®  
âœ… **å®æ—¶è®¡ç®—**: æ— éœ€é¢„å¤„ç†ï¼ŒåŠ¨æ€å“åº”ç”¨æˆ·å˜åŒ–  
âœ… **å…¼å®¹æ€§å¥½**: æ”¯æŒæœ‰æ ‡ç­¾å’Œæ— æ ‡ç­¾ç”¨æˆ·

### æœªæ¥å¯ä¼˜åŒ–æ–¹å‘

#### 1. ååŒè¿‡æ»¤ (Collaborative Filtering)

```javascript
// åŸºäºç”¨æˆ·è¡Œä¸ºçš„ååŒè¿‡æ»¤
const userBehaviorScore = calculateCollaborativeScore(
  userId,
  surveyId,
  userBehaviorMatrix
);

// æ··åˆæ¨è
survey.recommendScore =
  tagScore * 0.4 +
  ratingScore * 0.2 +
  popularityScore * 0.1 +
  userBehaviorScore * 0.3;
```

#### 2. æ—¶é—´è¡°å‡å› å­

```javascript
// è€ƒè™‘é—®å·å‘å¸ƒæ—¶é—´ï¼Œæ–°é—®å·è·å¾—åŠ æˆ
const daysSincePublished =
  (Date.now() - new Date(survey.publishedAt)) / (1000 * 60 * 60 * 24);
const timeDecayFactor = Math.exp(-daysSincePublished / 30); // 30å¤©åŠè¡°æœŸ

survey.recommendScore = baseScore * (1 + timeDecayFactor * 0.2);
```

#### 3. ç”¨æˆ·å†å²è¡Œä¸º

```javascript
// é¿å…æ¨èç”¨æˆ·å·²å®Œæˆçš„é—®å·
const completedSurveys = userStore.profile?.completedSurveys || [];
filtered = filtered.filter((s) => !completedSurveys.includes(s.id));

// æå‡ç”¨æˆ·æ”¶è—ç±»ä¼¼é—®å·çš„æ¨è
const favoriteTags = getFavoritesTags(userStore.favorites);
const favoriteBoost = calculateFavoriteBoost(survey.tags, favoriteTags);
survey.recommendScore += favoriteBoost * 0.1;
```

#### 4. A/B æµ‹è¯•æ¡†æ¶

```javascript
// å¤šç§æ¨èç­–ç•¥å¯¹æ¯”
const strategies = {
  tagBased: { weights: [0.5, 0.3, 0.2] },
  popularityBased: { weights: [0.2, 0.3, 0.5] },
  balanced: { weights: [0.33, 0.33, 0.34] },
};

const userStrategy = getUserStrategy(userId); // A/Båˆ†ç»„
applyRecommendStrategy(strategies[userStrategy]);
```

#### 5. æœºå™¨å­¦ä¹ æ¨¡å‹

```javascript
// ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹é¢„æµ‹ç”¨æˆ·å…´è¶£
const features = extractFeatures(user, survey);
const mlScore = await predictUserInterest(features);

survey.recommendScore = traditionScore * 0.6 + mlScore * 0.4;
```

---

## ğŸ“Š æ€§èƒ½è€ƒè™‘

### å½“å‰æ€§èƒ½ç‰¹ç‚¹

- **æ—¶é—´å¤æ‚åº¦**: O(n Ã— m)
  - n: é—®å·æ•°é‡
  - m: å¹³å‡æ ‡ç­¾æ•°é‡
- **ç©ºé—´å¤æ‚åº¦**: O(n)
  - éœ€è¦ä¸ºæ¯ä¸ªé—®å·å­˜å‚¨ recommendScore

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### 1. ç¼“å­˜æœºåˆ¶

```javascript
// ç¼“å­˜ç”¨æˆ·æ¨èç»“æœï¼ˆ5åˆ†é’Ÿï¼‰
const cacheKey = `recommend_${userId}_${Date.now() / 300000}`;
const cached = localStorage.getItem(cacheKey);
if (cached) return JSON.parse(cached);
```

#### 2. åˆ†é¡µåŠ è½½

```javascript
// åªè®¡ç®—å½“å‰é¡µéœ€è¦çš„é—®å·
const pageSize = 20;
const topCandidates = filtered
  .slice(0, 100) // åªå–å‰100ä¸ªå€™é€‰
  .map(calculateScore)
  .sort()
  .slice(0, pageSize);
```

#### 3. Web Worker

```javascript
// å°†æ¨èè®¡ç®—æ”¾åˆ° Web Worker
const worker = new Worker("/workers/recommend.js");
worker.postMessage({ surveys, userTags });
worker.onmessage = (e) => {
  const recommendations = e.data;
  updateUI(recommendations);
};
```

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### å•å…ƒæµ‹è¯•ç¤ºä¾‹

```javascript
describe("æ¨èç³»ç»Ÿæµ‹è¯•", () => {
  test("æœ‰æ ‡ç­¾ç”¨æˆ·åº”è¯¥è·å¾—ä¸ªæ€§åŒ–æ¨è", () => {
    const user = { tags: ["æŠ€æœ¯", "ç¼–ç¨‹"] };
    const surveys = [
      { id: 1, tags: ["æŠ€æœ¯"], rating: 4.0, participantCount: 500 },
      { id: 2, tags: ["å¸‚åœº"], rating: 4.5, participantCount: 800 },
    ];

    const result = recommend(user, surveys);

    expect(result[0].id).toBe(1); // æŠ€æœ¯é—®å·æ’ç¬¬ä¸€
    expect(result[0].recommendScore).toBeGreaterThan(result[1].recommendScore);
  });

  test("æ— æ ‡ç­¾ç”¨æˆ·åº”è¯¥è·å¾—éšæœºæ¨è", () => {
    const user = { tags: [] };
    const surveys = [...Array(10)].map((_, i) => ({ id: i }));

    const result1 = recommend(user, surveys);
    const result2 = recommend(user, surveys);

    expect(result1).not.toEqual(result2); // ä¸¤æ¬¡ç»“æœåº”è¯¥ä¸åŒ
  });

  test("æ¨èå¾—åˆ†è®¡ç®—æ­£ç¡®æ€§", () => {
    const survey = {
      tags: ["æŠ€æœ¯", "ç¼–ç¨‹"],
      rating: 4.0,
      participantCount: 600,
    };
    const userTags = ["æŠ€æœ¯", "ç¼–ç¨‹", "AI"];

    const score = calculateRecommendScore(survey, userTags);

    // tagScore: 2/3 = 0.667
    // ratingScore: 4/5 = 0.8
    // popularityScore: 600/1000 = 0.6
    // expected: 0.667*0.5 + 0.8*0.3 + 0.6*0.2 = 0.6935
    expect(score).toBeCloseTo(0.6935, 2);
  });
});
```

---

## ğŸ“ æ•°æ®ç»“æ„è¯´æ˜

### ç”¨æˆ·æ ‡ç­¾æ•°æ®ç»“æ„

```javascript
// users è¡¨ä¸­çš„ tags å­—æ®µ (JSON)
{
  "id": "user_123",
  "username": "techfan",
  "tags": [
    "æŠ€æœ¯",
    "ç¼–ç¨‹",
    "AI",
    "å‰ç«¯",
    "æ•°æ®åˆ†æ"
  ]
}
```

### é—®å·æ ‡ç­¾æ•°æ®ç»“æ„

```javascript
// surveys è¡¨ä¸­çš„ tags å­—æ®µ (JSON)
{
  "id": "survey_456",
  "title": "AIæŠ€æœ¯åº”ç”¨è°ƒç ”",
  "tags": [
    "AI",
    "æŠ€æœ¯",
    "æœºå™¨å­¦ä¹ "
  ],
  "rating": 4.5,
  "participantCount": 850
}
```

### æ¨èç»“æœæ•°æ®ç»“æ„

```javascript
// æ·»åŠ äº† recommendScore çš„é—®å·å¯¹è±¡
{
  "id": "survey_456",
  "title": "AIæŠ€æœ¯åº”ç”¨è°ƒç ”",
  "tags": ["AI", "æŠ€æœ¯", "æœºå™¨å­¦ä¹ "],
  "rating": 4.5,
  "participantCount": 850,
  "recommendScore": 0.764,  // æ¨èå¾—åˆ†
  // ... å…¶ä»–å­—æ®µ
}
```

---

## ğŸ”§ é…ç½®å‚æ•°

### å¯è°ƒæ•´å‚æ•°

```javascript
// åœ¨ useHomeLogic.js ä¸­
const RECOMMEND_CONFIG = {
  // æƒé‡é…ç½®
  TAG_WEIGHT: 0.5, // æ ‡ç­¾åŒ¹é…æƒé‡
  RATING_WEIGHT: 0.3, // è´¨é‡è¯„åˆ†æƒé‡
  POPULARITY_WEIGHT: 0.2, // çƒ­åº¦æƒé‡

  // å½’ä¸€åŒ–å‚æ•°
  MAX_RATING: 5, // æœ€å¤§è¯„åˆ†
  POPULARITY_BASE: 1000, // çƒ­åº¦åŸºå‡†äººæ•°

  // æ˜¾ç¤ºé…ç½®
  HOMEPAGE_LIMIT: 20, // é¦–é¡µæ˜¾ç¤ºæ•°é‡
  LOG_TOP_N: 3, // æ—¥å¿—æ˜¾ç¤ºå‰Nä¸ª
};
```

---

## ğŸ“– ç›¸å…³æ–‡ä»¶

### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„                                      | è¯´æ˜               |
| --------------------------------------------- | ------------------ |
| `client/src/composables/useHomeLogic.js`      | æ¨èç®—æ³•æ ¸å¿ƒå®ç°   |
| `client/src/hooks/useListFilter.js`           | åˆ—è¡¨è¿‡æ»¤å’Œæ’åº     |
| `client/src/views/frontend/home/HomePage.vue` | é¦–é¡µæ¨èå±•ç¤º       |
| `client/src/store/user.js`                    | ç”¨æˆ·æ•°æ®å’Œæ ‡ç­¾ç®¡ç† |

### æ•°æ®æ¨¡å‹

| æ–‡ä»¶è·¯å¾„                  | è¯´æ˜                       |
| ------------------------- | -------------------------- |
| `server/models/User.js`   | ç”¨æˆ·æ¨¡å‹ï¼ˆåŒ…å« tags å­—æ®µï¼‰ |
| `server/models/Survey.js` | é—®å·æ¨¡å‹ï¼ˆåŒ…å« tags å­—æ®µï¼‰ |

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æ ‡ç­¾ç®¡ç†

```javascript
// æ¨èä½¿ç”¨ç»Ÿä¸€çš„æ ‡ç­¾åº“
const TAG_LIBRARY = [
  "æŠ€æœ¯",
  "ç¼–ç¨‹",
  "AI",
  "æ•°æ®åˆ†æ",
  "å¸‚åœº",
  "ç”¨æˆ·ç ”ç©¶",
  "äº§å“",
  "æ•™è‚²",
  "å¥åº·",
  "ç”Ÿæ´»",
];

// æ ‡ç­¾æ ‡å‡†åŒ–
const normalizeTags = (tags) => {
  return tags
    .map((tag) => tag.trim())
    .filter((tag) => TAG_LIBRARY.includes(tag));
};
```

### 2. ç”¨æˆ·æ ‡ç­¾æ›´æ–°

```javascript
// æ ¹æ®ç”¨æˆ·è¡Œä¸ºè‡ªåŠ¨æ›´æ–°æ ‡ç­¾
const updateUserTags = async (userId, surveyTags) => {
  const user = await getUser(userId);
  const currentTags = user.tags || [];

  // åˆå¹¶å¹¶å»é‡
  const newTags = [...new Set([...currentTags, ...surveyTags])];

  // é™åˆ¶æ ‡ç­¾æ•°é‡ï¼ˆæœ€å¤š10ä¸ªï¼‰
  const limitedTags = newTags.slice(0, 10);

  await updateUser(userId, { tags: limitedTags });
};
```

### 3. å†·å¯åŠ¨å¤„ç†

```javascript
// æ–°ç”¨æˆ·é¦–æ¬¡è®¿é—®æ—¶æ¨èçƒ­é—¨é—®å·
if (!userTags || userTags.length === 0) {
  // æ–¹æ¡ˆ1: éšæœºæ¨è
  filtered = filtered.sort(() => Math.random() - 0.5);

  // æ–¹æ¡ˆ2: æ¨èçƒ­é—¨é—®å·
  // filtered.sort((a, b) =>
  //   (b.participantCount || 0) - (a.participantCount || 0)
  // );
}
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

### æ¨èç³»ç»Ÿç†è®º

- **ååŒè¿‡æ»¤**: User-based & Item-based Collaborative Filtering
- **å†…å®¹æ¨è**: Content-based Recommendation
- **æ··åˆæ¨è**: Hybrid Recommendation Systems
- **è¯„ä»·æŒ‡æ ‡**: Precision, Recall, NDCG, MAP

### ç›¸å…³æŠ€æœ¯

- Vue 3 Composition API
- Pinia çŠ¶æ€ç®¡ç†
- JavaScript æ•°ç»„æ“ä½œ
- æµè§ˆå™¨æ§åˆ¶å°è°ƒè¯•

---

## ğŸ“ è”ç³»ä¸åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue åˆ°é¡¹ç›®ä»“åº“
- æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—è¿›è¡Œè°ƒè¯•
- å‚è€ƒæœ¬æ–‡æ¡£çš„æµ‹è¯•ç”¨ä¾‹

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025 å¹´ 12 æœˆ 6 æ—¥  
**ä½œè€…**: æ™ºèƒ½é—®å·åˆ†æç³»ç»Ÿå¼€å‘å›¢é˜Ÿ
